<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>ç¬¬å››å‘¨ï¼šStevedore çš„æ¦‚å¿µã€ä½¿ç”¨ä¸æ¶æ„</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
}
.highlight-gray {
	color: rgb(155,154,151);
}
.highlight-brown {
	color: rgb(100,71,58);
}
.highlight-orange {
	color: rgb(217,115,13);
}
.highlight-yellow {
	color: rgb(223,171,1);
}
.highlight-teal {
	color: rgb(15,123,108);
}
.highlight-blue {
	color: rgb(11,110,153);
}
.highlight-purple {
	color: rgb(105,64,165);
}
.highlight-pink {
	color: rgb(173,26,114);
}
.highlight-red {
	color: rgb(224,62,62);
}
.highlight-gray_background {
	background: rgb(235,236,237);
}
.highlight-brown_background {
	background: rgb(233,229,227);
}
.highlight-orange_background {
	background: rgb(250,235,221);
}
.highlight-yellow_background {
	background: rgb(251,243,219);
}
.highlight-teal_background {
	background: rgb(221,237,234);
}
.highlight-blue_background {
	background: rgb(221,235,241);
}
.highlight-purple_background {
	background: rgb(234,228,242);
}
.highlight-pink_background {
	background: rgb(244,223,235);
}
.highlight-red_background {
	background: rgb(251,228,228);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(55, 53, 47, 0.6);
	fill: rgba(55, 53, 47, 0.6);
}
.block-color-brown {
	color: rgb(100,71,58);
	fill: rgb(100,71,58);
}
.block-color-orange {
	color: rgb(217,115,13);
	fill: rgb(217,115,13);
}
.block-color-yellow {
	color: rgb(223,171,1);
	fill: rgb(223,171,1);
}
.block-color-teal {
	color: rgb(15,123,108);
	fill: rgb(15,123,108);
}
.block-color-blue {
	color: rgb(11,110,153);
	fill: rgb(11,110,153);
}
.block-color-purple {
	color: rgb(105,64,165);
	fill: rgb(105,64,165);
}
.block-color-pink {
	color: rgb(173,26,114);
	fill: rgb(173,26,114);
}
.block-color-red {
	color: rgb(224,62,62);
	fill: rgb(224,62,62);
}
.block-color-gray_background {
	background: rgb(235,236,237);
}
.block-color-brown_background {
	background: rgb(233,229,227);
}
.block-color-orange_background {
	background: rgb(250,235,221);
}
.block-color-yellow_background {
	background: rgb(251,243,219);
}
.block-color-teal_background {
	background: rgb(221,237,234);
}
.block-color-blue_background {
	background: rgb(221,235,241);
}
.block-color-purple_background {
	background: rgb(234,228,242);
}
.block-color-pink_background {
	background: rgb(244,223,235);
}
.block-color-red_background {
	background: rgb(251,228,228);
}
.select-value-color-default { background-color: rgba(206,205,202,0.5); }
.select-value-color-gray { background-color: rgba(155,154,151, 0.4); }
.select-value-color-brown { background-color: rgba(140,46,0,0.2); }
.select-value-color-orange { background-color: rgba(245,93,0,0.2); }
.select-value-color-yellow { background-color: rgba(233,168,0,0.2); }
.select-value-color-green { background-color: rgba(0,135,107,0.2); }
.select-value-color-blue { background-color: rgba(0,120,223,0.2); }
.select-value-color-purple { background-color: rgba(103,36,222,0.2); }
.select-value-color-pink { background-color: rgba(221,0,129,0.2); }
.select-value-color-red { background-color: rgba(255,0,26,0.2); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="8fd82c9f-1065-4878-9046-d52e44168409" class="page sans"><header><img class="page-cover-image" src="https://www.notion.so/images/page-cover/woodcuts_1.jpg" style="object-position:center 90%"/><div class="page-header-icon page-header-icon-with-cover"><span class="icon">ğŸš¢</span></div><h1 class="page-title">ç¬¬å››å‘¨ï¼šStevedore çš„æ¦‚å¿µã€ä½¿ç”¨ä¸æ¶æ„</h1><table class="properties"><tbody><tr class="property-row property-row-created_time"><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.4);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesCreatedAt"><path d="M6.98643729,14.0000972 C5.19579566,14.0000972 3.40419152,13.3106896 2.04245843,11.9323606 C-0.681017475,9.21200555 -0.680780251,4.76029539 2.04293482,2.04012507 C4.76664406,-0.68004331 9.22427509,-0.68004331 11.9480135,2.04013479 C13.272481,3.36277455 14,5.1330091 14,6.99552762 C14,8.87640182 13.2721894,10.6285043 11.9480135,11.9509302 C10.5679344,13.3105924 8.77756503,14.0000972 6.98643729,14.0000972 Z M10.2705296,7.00913883 L10.2705296,8.46099754 L10.2705296,8.65543362 L10.076181,8.65543362 L8.6543739,8.65543362 L5.72059514,8.65543362 L5.52619796,8.65543362 L5.52619796,8.46099754 L5.52619796,5.52541044 L5.52619796,3.37946773 L5.52619796,3.18502193 L5.72059514,3.18502193 L7.17253164,3.18502193 L7.36692883,3.18502193 L7.36692883,3.37946773 L7.36692883,6.81467358 L10.076181,6.81467358 L10.2705296,6.81467358 L10.2705296,7.00913883 Z M12.1601539,6.99552762 C12.1601539,5.61697497 11.6190112,4.32597154 10.6393933,3.34769528 C8.63253764,1.34336744 5.35197452,1.34061603 3.34153136,3.33944106 C3.33868273,3.34219247 3.33607716,3.34494388 3.33322852,3.34769528 C1.32397148,5.35459953 1.32372842,8.63641682 3.33322852,10.6433794 C5.34295224,12.6504489 8.62968901,12.6504489 10.6393933,10.6433794 C11.6190112,9.66506426 12.1601539,8.37408027 12.1601539,6.99552762 Z"></path></svg></span>Created</th><td><time>@August 16, 2021 4:38 PM</time></td></tr><tr class="property-row property-row-select"><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.4);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesSelect"><path d="M7,13 C10.31348,13 13,10.31371 13,7 C13,3.68629 10.31348,1 7,1 C3.68652,1 1,3.68629 1,7 C1,10.31371 3.68652,13 7,13 Z M3.75098,5.32278 C3.64893,5.19142 3.74268,5 3.90869,5 L10.09131,5 C10.25732,5 10.35107,5.19142 10.24902,5.32278 L7.15771,9.29703 C7.07764,9.39998 6.92236,9.39998 6.84229,9.29703 L3.75098,5.32278 Z"></path></svg></span>Status</th><td><span class="selected-value select-value-color-green">Done</span></td></tr></tbody></table></header><div class="page-body"><p id="c20fc36c-cf74-4a5e-9ddd-c73eb4bb3e88" class="">æœ¬æ–‡æ˜¯å…³äºStevedore çš„æ¦‚å¿µã€ä½¿ç”¨ä¸æ¶æ„çš„ï¼Œ
æ‰€ä»¥ä¸€å¼€å§‹é’ˆå¯¹è¿™ä¸ªé¢˜ç›®ä»¥åŠå¤§ç‰›ä»¬ç•™ä¸‹çš„é—®é¢˜ï¼Œæˆ‘ä»¬åšäº†ä¸ªå¤§èƒ†çš„å°è¯•ã€‚</p><h1 id="4b55ecec-d849-446b-a218-94230c61db6d" class="">ä¸€ã€å¤§èƒ†å°è¯•ï¼Œå†²å†²å†²</h1><p id="e6c2b598-68f2-40f5-917e-8d5262ea6d00" class="">é—®é¢˜æ˜¯è¿™æ ·çš„â€œæˆ‘ä»¬æ˜¯å¦æœ‰å¿…è¦æœ¬åœ°åŒ–éƒ¨ç½²ä¸€ä¸ªStevedore Serverï¼Ÿå¦‚ä½•éƒ¨ç½²ï¼Ÿâ€</p><p id="b41a1ede-4217-4ded-998f-8cd597ddc1f5" class="">é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œå°ç»„çš„å¤§ç¥ä»¬åšäº†å¦‚ä¸‹ç ”ç©¶ã€‚</p><h2 id="af698883-01cd-494e-9b09-610ee8fa94d9" class="">1.1ã€å…³é”®ç ”ç©¶ç‚¹å’Œéƒ¨ç½²è¿è¡Œ</h2><h3 id="7a7112db-6bde-4146-a362-bcad1a1bbafd" class="">éƒ¨ç½²æœ¬åœ° CDN</h3><ul id="0916558c-aad2-49f3-9a16-cd8a8ee83c51" class="bulleted-list"><li>è¿è¡Œ Stevedore-CDN<pre id="191c8e8c-3dd2-4cac-890e-dece13186c1a" class="code"><code># å¯åŠ¨docker
sudo systemctl start docker
# å¯åŠ¨å®¹å™¨
docker run --rm -v ./cache-server/nginx-persistent.conf:/etc/nginx/nginx.conf:ro -v ~/stevecache:/var/cache/stevedore -p 8080:80 nginx:stable</code></pre></li></ul><ul id="7026f9a0-2f79-4812-90b5-144d11bdb247" class="bulleted-list"><li>æŸ¥çœ‹Stevedore-CDNè¿è¡Œæ—¥å¿—<pre id="0bb01fed-17cb-4bf1-be31-b0fa30681175" class="code"><code># æŸ¥çœ‹å®¹å™¨åˆ—è¡¨
docker container ls
# æ­¤æ—¶èƒ½çœ‹åˆ°å®¹å™¨çš„ DOCKER_INSTANCE_ID

# Attackåˆ°Container
$ docker container attach DOCKER_INSTANCE_ID
# è¿™é‡Œä¼šä¸€ç›´æ˜¾ç¤ºæ—¥å¿—</code></pre></li></ul><ul id="0d86126c-7b7e-43d6-a97e-5e112e06e176" class="bulleted-list"><li>æœ¬åœ° Stevedore-CDN éªŒè¯<p id="8f9d2c02-7a4b-4901-9d00-584b28c2977c" class="">é…ç½® Stevedore Config, å°† public URL æ”¹æˆ æœ¬åœ° CDN çš„ IP å’Œç«¯å£, å¹¶åˆ é™¤ Rollback URLï¼Œåœ¨ unity ä¸­æ‰§è¡Œæ„å»ºå‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ° æ­£å¸¸ä¸‹è½½ artifactsã€‚</p></li></ul><p id="1485fc03-69bd-4db2-8950-d79a8c0a93c4" class="">
</p><h3 id="1cdd29b3-fd57-4bdb-93ce-2dff132a4d2b" class="">éƒ¨ç½²æœ¬åœ° Stevedore Server</h3><figure id="5d709c4c-6cba-4646-a8eb-ed59652c8c46" class="image"><a href="index/Untitled.png"><img style="width:1748px" src="index/Untitled.png"/></a></figure><ul id="56b304d4-1e60-4e96-be1f-892855ca0160" class="bulleted-list"><li>Google Cloud Storage<ul id="3221ad0e-7200-4be4-9648-29e905fd371b" class="bulleted-list"><li>è®¿é—®GCPå®˜ç½‘ï¼Œå¹¶ç™»å½•<figure id="762d53f1-21c4-407b-bc0d-c5071836ade1"><a href="https://console.cloud.google.com/apis/credentials?pli=1&amp;project=unity-ml-bhram-test&amp;folder=&amp;organizationId=" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">Google Cloud Platform</div><div class="bookmark-description">Google Cloud Platform lets you build, deploy, and scale applications, websites, and services on the same infrastructure as Google.</div></div><div class="bookmark-href"><img src="https://accounts.google.com/favicon.ico" class="icon bookmark-icon"/>https://console.cloud.google.com/apis/credentials?pli=1&amp;project=unity-ml-bhram-test&amp;folder=&amp;organizationId=</div></div><img src="https://ssl.gstatic.com/accounts/ui/avatar_2x.png" class="bookmark-image"/></a></figure></li></ul><ul id="9e7a5257-4390-4e7b-80e2-7c03d23c0cc0" class="bulleted-list"><li>ç”Ÿæˆ API_KEY å’Œ OAuth<ul id="cbbf08d8-f6df-45d5-99f0-35c804790104" class="bulleted-list"><li>åˆ›å»ºè¯ä¹¦<figure id="b9d0f349-77eb-4747-8ac1-9966e3990785" class="image"><a href="index/Untitled%201.png"><img style="width:1810px" src="index/Untitled%201.png"/></a></figure></li></ul><ul id="6ff7cb6c-be2a-4714-9a98-fde2b0912ab9" class="bulleted-list"><li>ä¸‹è½½ OAuth <figure id="414d698b-2218-4198-9e87-c945de6b3ee6" class="image"><a href="index/Untitled%202.png"><img style="width:2020px" src="index/Untitled%202.png"/></a></figure><p id="0710b2ea-edd1-4e0d-b4a0-47b207d362c1" class="">ç‚¹å‡»å›¾ç¤ºå³ä¸‹è§’ â¬‡ï¸ å¯ä¸‹è½½å¾—åˆ° <em>client_secret.json </em>æ–‡ä»¶ï¼š</p><pre id="fa8f0fd1-c938-4fcb-9c81-975b531674a0" class="code"><code>{
  &quot;web&quot;: {
      &quot;client_id&quot;: &quot;xxxxxxxxxxxxxx.apps.googleusercontent.com&quot;,
      &quot;project_id&quot;: &quot;xxxxxxxxxxxx&quot;,
      &quot;auth_uri&quot;: &quot;https://accounts.google.com/o/oauth2/auth&quot;,
      &quot;token_uri&quot;: &quot;https://oauth2.googleapis.com/token&quot;,
      &quot;auth_provider_x509_cert_url&quot;: &quot;https://www.googleapis.com/oauth2/v1/certs&quot;,
      &quot;client_secret&quot;: &quot;xxxxxxxxxxxxxxxxxxxxxxxxx&quot;,
      &quot;redirect_uris&quot;: [
          &quot;https://xxxxxxxxxxxxxxxxxxxxxxxxxxxx.apps.googleusercontent.com:handleRedirect&quot;
      ]
  }
}</code></pre><p id="e4971104-7c5c-413c-a018-31b26744a31a" class="">å°†ä¸Šè¿° <em>client_secret.json </em>ä¸­çš„ä¿¡æ¯å¡«å…¥ <code>gcs_credentials</code> ï¼ˆå‚è€ƒä¸‹æ–‡åŒåå˜é‡ï¼‰</p></li></ul><ul id="9320e808-8769-44af-9cc1-a7394525977d" class="bulleted-list"><li>åˆ›å»º Service è´¦å·<p id="0716b535-bb1e-4bb3-91e6-68638c8cd64d" class="">å› æˆ‘ä»¬çš„è´¦å·æ²¡æœ‰æƒé™åˆ›å»º Google Cloud Project, å› æ­¤æˆ‘ä»¬åªèƒ½åœ¨ç°æœ‰çš„é¡¹ç›®ä¸‹åˆ›å»ºä¸€ä¸ª Service è´¦å·ã€‚</p><figure id="1d1c0c9f-bae0-44e4-99cd-8f088db66244" class="image"><a href="index/Untitled%203.png"><img style="width:2260px" src="index/Untitled%203.png"/></a></figure><p id="5c08bd92-babb-40e2-94c4-59db50095f49" class="">åˆ›å»ºå®Œæˆåï¼Œå¯å¾—åˆ° private_key ä»¥å¤‡ç”¨ã€‚</p></li></ul><ul id="83974680-affc-4938-a9b5-b71e1444c25f" class="bulleted-list"><li>åˆ›å»º Bucket<p id="bcfd3b35-98a5-424f-8946-bdf8f874b9fe" class="">ä¸ºé¿å…æ±¡æŸ“ç°æœ‰æœåŠ¡æ•°æ®ï¼Œæˆ‘ä»¬åˆ›å»ºäº†æ–°çš„ Bucket ä»¥å­˜å‚¨ Artifacts.</p><figure id="f1327049-e246-4a3b-95cc-42668e982302" class="image"><a href="index/Untitled%204.png"><img style="width:1622px" src="index/Untitled%204.png"/></a></figure><p id="4e223cd9-c9da-4530-bc56-657422330162" class="">åˆ›å»ºå®Œæˆåï¼Œæ‹¿åˆ° Bucket ä»¥å¤‡ç”¨ã€‚</p></li></ul></li></ul></li></ul><ul id="a7dc39cd-98d7-4369-a5ee-dc1dc07a0264" class="bulleted-list"><li>å¯åŠ¨ Stevedore-infra ï¼ˆUpload Serviceï¼‰<ul id="ddd437d4-6af5-446c-8725-175b84ac89a7" class="bulleted-list"><li>ä¿®æ”¹ UploadServiceConfig çš„ <code>prog</code><p id="5f8417bd-7bf6-4ebf-9f3b-441b314f66c5" class="">æ–‡ä»¶ï¼š<em>services/stevedore/upload/</em><em><strong>main</strong></em><em>.py</em></p><pre id="18a2544c-8cc4-4f7e-b511-f11236a1055a" class="code"><code>class UploadServiceConfig(serviceconfig.BaseServiceConfig):
    prog = &#x27;stevedore.upload.plin_plin_plin_plin_plin_plin_&#x27;</code></pre><p id="0d282a98-5ec2-415e-aab3-e5eb5614e3e5" class="">ç›®çš„ï¼š<code>prog</code> å³ <code>application_secret</code>ï¼Œæœ‰ä¸å°‘äº40å­—ç¬¦çš„é™åˆ¶</p></li></ul><ul id="95e79e58-f2ca-408a-9668-fb637e1d022a" class="bulleted-list"><li>é…ç½® Bucket<p id="119b49a1-4673-4a54-a72c-accd6c1c1db4" class="">åœ¨ <a href="https://github.cds.internal.unity3d.com/unity/stevedore-infra/blob/8c2efb61f3a156e2f8cceffa4d9ab26897214fdd/services/stevedore/serviceconfig.py">services/stevedore/serviceconfig.py</a> ä¸­ï¼Œåœ¨åˆ›å»º GoogleCloudStorageStore æ—¶ï¼Œå°†ä¸Šæ–‡ç”³è¯·çš„ bucketID å¡«å…¥å…¶ä¸­ã€‚</p></li></ul><ul id="8fa0d7cc-1fed-4873-99eb-493737398ea4" class="bulleted-list"><li>é…ç½® <em>services/config/service.cfg.py</em> æ–‡ä»¶<ul id="8c76b108-aca6-4559-8f8a-6b43cdb7a946" class="bulleted-list"><li>æ ¹æ® <a href="https://github.cds.internal.unity3d.com/unity/stevedore-infra/blob/8c2efb61f3a156e2f8cceffa4d9ab26897214fdd/services/config-templates/service.cfg.py">stevedore-infra/services/config-templates/service.cfg.py </a> æ¨¡æ¿ç”Ÿæˆ <em>service.cfg.py </em>æ–‡ä»¶ï¼Œå¹¶æ”¾ç½® <em>services/config/ </em>ç›®å½•ä¸‹ ( âš ï¸: æœ€æ–°çš„ master åˆ†æ”¯ä¸Šå·²ç»å°†è¯¥æ¨¡æ¿æ–‡ä»¶åˆ é™¤ï¼Œå¯å‚è€ƒè¯¥æ–‡ä»¶çš„ <a href="https://github.cds.internal.unity3d.com/unity/stevedore-infra/commits/master/services/config-templates/service.cfg.py">commit history</a> )</li></ul><ul id="d5994159-67aa-44bc-9bc9-4351e4bee475" class="bulleted-list"><li>ä¿®æ”¹ <code>upload_url_prefix</code> <p id="1ef2acb3-4418-4c7e-bc1c-fb4fd6f9d75f" class=""> å°† &quot;stevedore-upload.ds.unity3d.com&quot; æ›¿æ¢æˆ &lt;LOCAL_SERVER_IP:PORT&gt;</p></li></ul><ul id="0413269c-4ea5-4dbb-ba40-f2be9d74c31a" class="bulleted-list"><li>ä¿®æ”¹ <code>gcs_credentials</code><p id="e0f42a4e-a470-45a3-8b5a-e85548289750" class="">å°†ä¸Šè¿° <em>client_secret.json </em>ä¸­çš„ä¿¡æ¯è½¬æ¢æˆ Python Dictionary æ ¼å¼é…ç½®è‡³å…¶ä¸­ï¼Œå¦å¤–private_keyå‚ç…§ä¸Šè¿° â€œç”Ÿæˆ Service è´¦å·â€ éƒ¨åˆ†æ‰€è·å¾—çš„ private_keyã€‚</p><pre id="b025c1c2-cc9a-43bb-bf70-9e5b8ee76d50" class="code"><code>gcs_credentials = { 
    &quot;type&quot;: &quot;service_account&quot;,
    &quot;private_key_id&quot;: &quot;xxxx&quot;,
    &quot;private_key&quot;: &quot;xxxx&quot;,
    &quot;client_email&quot;: &quot;xxxx@unity3d.com&quot;,
    &quot;client_id&quot;: &quot;xxxxx&quot;,
    &quot;project_id&quot;: &quot;xxxxx&quot;,
    &quot;auth_uri&quot;: &quot;https://accounts.google.com/o/oauth2/auth&quot;,
    &quot;token_uri&quot;: &quot;https://oauth2.googleapis.com/token&quot;,
    &quot;auth_provider_x509_cert_url&quot;: &quot;https://www.googleapis.com/oauth2/v1/certs&quot;,
    &quot;client_secret&quot;: &quot;X1IDQOvpvuFeubgSTl95iyvb&quot;,
    &quot;redirect_uris&quot;: [
        &quot;https://xxxxxxxx&quot;
    ],
    &quot;client_x509_cert_url&quot;: &quot;{{ cfg_gcs_credentials.client_x509_cert_url }}&quot;
}</code></pre></li></ul></li></ul><ul id="9ebed341-bf20-4ed0-a02d-8765ea0661ec" class="bulleted-list"><li>HMAC<ul id="c77a2528-9e39-4b83-af28-44cac511bd7b" class="bulleted-list"><li>æ¦‚å¿µï¼š HMAC (Hash-based message authentication code), æ•£åˆ—æ¶ˆæ¯è®¤è¯ç ã€‚æ˜¯ä½¿ç”¨å¯†ç æ•£åˆ—å‡½æ•°ï¼ŒåŒæ—¶ç»“åˆä¸€ä¸ªåŠ å¯†å¯†é’¥äº§ç”Ÿçš„æ¶ˆæ¯è®¤è¯ç ã€‚</li></ul><ul id="3df9d0e3-e061-4aa4-bd3b-4b03f4e297e5" class="bulleted-list"><li>å…¬å¼ï¼š<p id="0d713864-97ea-4892-b480-db4ef6dce66e" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>M</mi><mi>A</mi><mi>C</mi><mo stretchy="false">(</mo><mi>K</mi><mo separator="true">,</mo><mi>m</mi><mo stretchy="false">)</mo><mo>=</mo><mi>H</mi><mo stretchy="false">(</mo><mo stretchy="false">(</mo><msup><mi>K</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>âŠ•</mo><mi>o</mi><mi>p</mi><mi>a</mi><mi>d</mi><mo stretchy="false">)</mo><mi mathvariant="normal">âˆ£</mi><mi mathvariant="normal">âˆ£</mi><mi>H</mi><mo stretchy="false">(</mo><mo stretchy="false">(</mo><msup><mi>K</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>âŠ•</mo><mi>i</mi><mi>p</mi><mi>a</mi><mi>d</mi><mo stretchy="false">)</mo><mi mathvariant="normal">âˆ£</mi><mi mathvariant="normal">âˆ£</mi><mi>m</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">HMAC(K,m)=H((K&#x27;\oplus opad)||H((K&#x27;\oplus ipad)||m))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">m</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.001892em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">((</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âŠ•</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.001892em;vertical-align:-0.25em;"></span><span class="mord mathnormal">o</span><span class="mord mathnormal">p</span><span class="mord mathnormal">a</span><span class="mord mathnormal">d</span><span class="mclose">)</span><span class="mord">âˆ£âˆ£</span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">((</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âŠ•</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">i</span><span class="mord mathnormal">p</span><span class="mord mathnormal">a</span><span class="mord mathnormal">d</span><span class="mclose">)</span><span class="mord">âˆ£âˆ£</span><span class="mord mathnormal">m</span><span class="mclose">))</span></span></span></span></span><span>ï»¿</span></span></p><p id="fb858ff3-4b54-4d37-b38a-6eb044b8586e" class="">å…¶ä¸­ï¼š<div class="indented"><p id="789f0762-a791-48ca-9b1a-8c8d997041b3" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi></mrow><annotation encoding="application/x-tex">H</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span></span></span></span></span><span>ï»¿</span></span> ä¸ºå¯†ç <a href="https://zh.wikipedia.org/wiki/%E9%9B%9C%E6%B9%8A%E5%87%BD%E6%95%B8">æ•£åˆ—å‡½æ•°</a>ï¼ˆå¦‚ <a href="https://zh.wikipedia.org/wiki/SHA%E5%AE%B6%E6%97%8F">SHA å®¶æ—</a>ï¼‰</p><p id="a8a7a21a-3d3e-4cec-a4e0-f080f3f28775" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span></span><span>ï»¿</span></span> ä¸º<a href="https://zh.wikipedia.org/wiki/%E5%AF%86%E9%92%A5">å¯†é’¥</a>ï¼ˆsecret keyï¼‰</p><p id="01dae31b-f6ab-4b9c-8a03-8f3afbcdc876" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span></span><span>ï»¿</span></span> æ˜¯è¦è®¤è¯çš„æ¶ˆæ¯</p><p id="48c42f5d-cc01-4a98-82a0-9c0875be844d" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>K</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></mrow><annotation encoding="application/x-tex">K&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.751892em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span></span><span>ï»¿</span></span> æ˜¯ä»åŸå§‹å¯†é’¥ <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span></span><span>ï»¿</span></span> å¯¼å‡ºçš„å¦ä¸€ä¸ªç§˜å¯†å¯†é’¥ï¼ˆå¦‚æœ <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span></span><span>ï»¿</span></span> çŸ­äºæ•£åˆ—å‡½æ•°çš„è¾“å…¥å—å¤§å°ï¼Œåˆ™å‘å³è¡¥ <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span></span><span>ï»¿</span></span>ï¼›å¦‚æœæ¯”è¯¥å—å¤§å°æ›´é•¿ï¼Œåˆ™å¯¹ <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span></span><span>ï»¿</span></span> è¿›è¡Œæ•£åˆ—ï¼‰</p><p id="989c9a5e-8e8a-48a6-bb05-81859f2cd84d" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">âˆ£</mi><mi mathvariant="normal">âˆ£</mi></mrow><annotation encoding="application/x-tex">|| </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">âˆ£âˆ£</span></span></span></span></span><span>ï»¿</span></span> ä»£è¡¨æ‹¼æ¥</p><p id="29d4421d-6773-45b7-81ec-ced9626ca4a2" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âŠ•</mo></mrow><annotation encoding="application/x-tex">âŠ•</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">âŠ•</span></span></span></span></span><span>ï»¿</span></span> ä»£è¡¨<a href="https://zh.wikipedia.org/wiki/%E7%95%B0%E6%88%96">å¼‚æˆ–</a>ï¼ˆXORï¼‰</p><p id="538bae7e-90d9-4788-a4e9-5435b08e53e2" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>o</mi><mi>p</mi><mi>a</mi><mi>d</mi><mtext>Â </mtext></mrow><annotation encoding="application/x-tex">opadÂ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">o</span><span class="mord mathnormal">p</span><span class="mord mathnormal">a</span><span class="mord mathnormal">d</span><span class="mord">Â </span></span></span></span></span><span>ï»¿</span></span>æ˜¯å¤–éƒ¨å¡«å……å¸¸é‡ï¼ˆ0x5câ€¦5cï¼‰</p><p id="c871ae89-a365-4e2d-a96d-e80504f461cb" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mi>p</mi><mi>a</mi><mi>d</mi><mtext>Â </mtext></mrow><annotation encoding="application/x-tex">ipadÂ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">i</span><span class="mord mathnormal">p</span><span class="mord mathnormal">a</span><span class="mord mathnormal">d</span><span class="mord">Â </span></span></span></span></span><span>ï»¿</span></span>æ˜¯å†…éƒ¨å¡«å……å¸¸é‡ï¼ˆ0x36â€¦36ï¼‰</p></div></p></li></ul><ul id="5e65a3fd-cb61-4e2a-b23a-47678d3f81d0" class="bulleted-list"><li>Stevedoreä¸­çš„åº”ç”¨<p id="540667a1-b0a6-4b94-b49d-30bf5f8a394f" class="">Stevedore ä½¿ç”¨ hmac è¿›è¡Œæ¶ˆæ¯è®¤è¯ï¼ŒåŸºäº &quot;RFC 2104 HMAC&quot; æ ‡å‡†çš„ hmac ç®—æ³•, <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>k</mi><mi>s</mi><mi>i</mi><mi>z</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">blocksize</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">b</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">oc</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal">s</span><span class="mord mathnormal">i</span><span class="mord mathnormal">ze</span></span></span></span></span><span>ï»¿</span></span> ä¸º <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>64</mn></mrow><annotation encoding="application/x-tex">64</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">64</span></span></span></span></span><span>ï»¿</span></span> ï¼Œè¯¦æƒ…å¯å‚è€ƒ ğŸ”—<a href="https://github.cds.internal.unity3d.com/unity/stevedore-infra/blob/acca01159077eadb504a4e1eca421828645f42b1/services/stevedore/hmactoken.py">services/stevedore/hmactoken.py</a> å’Œ ğŸ”—<a href="https://github.com/python/cpython/blob/3.9/Lib/hmac.py">python3/lib/hmac.py</a> ã€‚</p></li></ul></li></ul><ul id="852cadfb-3301-4703-a726-61705a703a8c" class="bulleted-list"><li>æ„å»º stevedore-infra é•œåƒ<pre id="b9968ad3-ecd1-41a4-9e7c-89658043c451" class="code"><code>cd ~/stevedore-infra
make build</code></pre></li></ul><ul id="835ba56a-b750-461b-ae3f-0212fad2c9fa" class="bulleted-list"><li>è¿è¡Œ stevedore-infra æœåŠ¡<pre id="7a4662db-6b0b-4a62-8b33-3436d5ab9b58" class="code"><code>cd ~/stevedore-infra
make run</code></pre></li></ul></li></ul><ul id="b20d9d0c-da98-4e11-87ea-6a09a5654515" class="bulleted-list"><li>éªŒè¯ï¼š<ul id="cecea7cf-32af-4309-be8f-3e93bf50b665" class="bulleted-list"><li>ä½¿ç”¨å‘½ä»¤è¡Œå‘æœ¬åœ° Stevedore Server å‘èµ· upload è¯·æ±‚<pre id="07f03c48-b8b4-4af9-8cd4-6218816772ce" class="code"><code>curl -H &quot;Authorization: Bearer xxx@unity3d.com:SECRET:&lt;SECRET_KEY&gt;-s&quot; \
--data-binary @&lt;FILENAME&gt; http://&lt;IP&gt;:8000/upload/r/testing/&lt;ARTIFACT-ID&gt;</code></pre><p id="c757dfbc-856b-43e1-bc7d-1e3e6bb14290" class="">æ³¨æ„ï¼š Authorization ä¿¡æ¯ä¼šå¾ˆå¿«è¿‡æœŸï¼Œéœ€è¦é‡æ–°ç”Ÿæˆï¼Œæˆ–è€…å®šæœŸä» <a href="https://stevedore.unity3d.com/upload/">https://stevedore.unity3d.com/upload/</a> é¡µé¢æ‹·è´æ›¿æ¢ã€‚</p></li></ul><ul id="e2852f66-af43-45f9-9c05-147c0f394423" class="bulleted-list"><li>è¯·æ±‚ç»“æœï¼š<figure id="ec3f61e6-001b-42ca-99df-cdf97c8fb008" class="image"><a href="index/Untitled%205.png"><img style="width:3130px" src="index/Untitled%205.png"/></a></figure></li></ul></li></ul><ul id="7614d0ea-36dc-4952-9949-a51790f60587" class="bulleted-list"><li>ä½¿ç”¨ CCD ä½œä¸ºå­˜å‚¨åç«¯<p id="1c59704f-814c-4ff1-bfe1-5139b7eae159" class="">ç¯å¢ƒå› ç´ ï¼Œ Google Cloud åœ¨å›½å†…æ°´åœŸä¸æœã€‚é’ˆå¯¹æ­¤é—®é¢˜ï¼Œæˆ‘ä»¬å‡†å¤‡å°†å­˜å‚¨åç«¯è¿ç§»è‡³ CCDã€‚</p><ul id="c1902388-580e-4782-bd1c-464d1bfb1362" class="bulleted-list"><li>å‚ç…§ services/stevedore/stores/dummy.py æ¨¡æ¿ï¼Œ åˆ›å»º ccd.py, ä¿éšœæ‰€æœ‰æ¥å£ä¸å˜ï¼š<pre id="fce12ee9-a3cc-4419-9086-d0c23bbe993d" class="code"><code>class CloudContentDelivery:
	def __init__(self, bucket_name, send_http_request):
	def get_artifact_url(self, artifact_id):
	def list_artifacts(self):
	def upload_artifact(self, artifact_id, upload_body, metadata):</code></pre></li></ul><ul id="837e9577-a0c3-43c5-8dcf-56cbf3c7a97e" class="bulleted-list"><li>æ¥å£å®ç° get_artifact_url<pre id="d5d98c6c-2a64-41cd-8eab-6dfe77ebb661" class="code"><code>dl_url = f&#x27;https://assetstreaming-content.unity.cn/client_api/v1/buckets/{self.bucket_id}/release_by_badge/latest/entry_by_path/content/?path=&#x27;
return f&#x27;{dl_url}{str(artifact_id)}&#x27;</code></pre></li></ul><ul id="8a0c37c8-0614-49fe-ab38-9145df6b7b7f" class="bulleted-list"><li>æ¥å£å®ç° list_artifacts<p id="49e708f1-7153-4c95-9b9d-2a9588dddd92" class="">å‘ <a href="https://content-api.cloud.unity3d.com/api/v1/buckets/{self.bucket_id}/entries/">https://content-api.cloud.unity3d.com/api/v1/buckets/{self.bucket_id}/entries/</a> å‘é€Getè¯·æ±‚ï¼Œå¹¶å¤„ç†è¿”å›æ•°æ®å³å¯</p></li></ul><ul id="68cb0083-180b-4b03-96a2-86fa16bfcca6" class="bulleted-list"><li>æ¥å£å®ç° upload_artifact<ul id="6e66621f-a4f4-43d9-96cb-08477db8a0d3" class="bulleted-list"><li>å‘é€ Post è¯·æ±‚ï¼Œåˆ›å»º Entry , æ‹¿åˆ° Entry_ID<p id="02b10e65-4c8f-4090-921e-fb880b05809e" class="">API : <a href="https://content-api.cloud.unity3d.com/api/v1/buckets/%7Bself.bucket_id%7D/entries/">https://content-api.cloud.unity3d.com/api/v1/buckets/{self.bucket_id}/entries/</a></p></li></ul><ul id="fba2ab20-d724-4dd1-8ed8-2e5415a24ce4" class="bulleted-list"><li>å‘é€ PATCH è¯·æ±‚ï¼Œå°†æ–‡ä»¶æµ Patch åˆ° Entry_ID æ‰€å¯¹åº”çš„ blob å¯¹è±¡ä¸­ã€‚<p id="6d327f63-a399-43a0-be51-ee035d1256a4" class="">API: <a href="https://content-api.cloud.unity3d.com/api/v1/buckets/%7Bself.bucket_id%7D/entries/%7Bentry_id%7D/content/">https://content-api.cloud.unity3d.com/api/v1/buckets/{self.bucket_id}/entries/{entry_id}/content/</a></p></li></ul></li></ul><ul id="10ab3358-00db-428c-8e74-b38baced7f2b" class="bulleted-list"><li>å¯ç”¨ CCD<p id="7720a92d-32c1-4349-b06d-770c45011244" class="">åœ¨ä¸­ï¼Œå°† <code>gcs.GoogleCloudStorageStore </code>æ›¿æ¢æˆ <code>ccd.CloudContentDelivery</code></p><figure id="ac71fca1-d95b-42c8-b16c-55dc748f25bb" class="image"><a href="index/Untitled%206.png"><img style="width:2752px" src="index/Untitled%206.png"/></a></figure></li></ul><ul id="e4d24746-eeff-4001-843a-9742df18bf8b" class="bulleted-list"><li>éªŒè¯ç»“æœ<p id="eb5705f2-cd0d-4fa1-82db-5d6ed43a40ac" class="">è¿è¡Œå¤±è´¥ã€‚ç›®å‰ CCD ä¸Šä¼ çš„é€»è¾‘å’Œå®˜ç½‘ API æ–‡æ¡£ä¸ä¸€æ ·ï¼Œéœ€è¦é‡æ–°é€‚é…ã€‚</p></li></ul></li></ul><p id="c2e5ab70-ca97-43c7-b773-dbe8988e6ab4" class="">
</p><h2 id="a26dc8a0-33d1-4661-8e21-e5b00e6293c2" class="">1.3ã€æœ¬åœ°åŒ–æ„ä¹‰</h2><p id="a79119b9-bbf9-42cf-9225-3fd591997005" class="">
</p><p id="9737bcb5-e222-41d9-b3f8-c81f9d9e6ebe" class="">æœ¬åœ°åŒ–çš„æ„ä¹‰æ— éæ˜¯æ›´å¿«ï¼Œæ›´å¼ºï¼Œæ›´æ˜“æ§åˆ¶ï¼Œä¹Ÿå°±æ˜¯æ›´å¿«çš„ä¸Šä¼ ä¸‹è½½é€Ÿåº¦ï¼Œæ›´å¼ºçš„ä½¿ç”¨åŠŸèƒ½ï¼Œæ›´å®¹æ˜“è‡ªå·±æŒæ§ä»£ç ã€‚</p><p id="604fa272-71c9-4fbb-bb49-a28f90dddda8" class="">æœ¬åœ°åŒ–çš„æœ€ç»ˆç›®çš„å°±æ˜¯ç”Ÿäº§å…·æœ‰ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰çš„äº§å“ã€‚</p><h1 id="4e1a6b58-41aa-4f40-89c9-98b1f9385d66" class="">äºŒã€ç–‘é—®</h1><p id="72f5e522-882e-405e-bec9-e4153bcc48fa" class="">é’ˆå¯¹ä¸Šé¢çš„é—®é¢˜ç ”ç©¶ï¼Œæˆ‘ä»¬å¤§æ¦‚çŒœæµ‹äº†Stevedoreæ˜¯å¹²ä»€ä¹ˆçš„ï¼Œäº†è§£æœ¬åœ°åŒ–çš„æ„ä¹‰ï¼Œå¹¶ä¸”å¤§è‡´çŸ¥é“å¦‚ä½•å»éƒ¨ç½²ã€‚</p><p id="75802b53-ac6f-4c79-93cc-ceab3e0b10ed" class="">å½“ç„¶å¤§å®¶å¿…ç„¶æœ‰å¾ˆå¤šç–‘é—®ï¼Œè¯¸å¦‚ï¼šä»€ä¹ˆæ˜¯Stevedoreï¼ŸStevedoreæœ‰ä»€ä¹ˆå†å²ï¼ŸStevedoreå¹²ä»€ä¹ˆçš„ï¼Ÿåœ¨unityä¸­æ‰®æ¼”ä»€ä¹ˆè§’è‰²ï¼Ÿå…·ä½“æ€ä¹ˆå‘å¸ƒï¼Ÿæ¶æ„å¦‚ä½•ï¼Ÿbeeå¦‚ä½•æ•´åˆStevedoreä»£ç ï¼Ÿ</p><p id="e828e7d2-fe7a-479b-963d-13ff5aa5d9ea" class="">å¸¦ç€ä»¥ä¸Šé—®é¢˜ï¼Œä»¥åŠåˆæ­¥çš„äº†è§£å’Œå¤§å®¶å„è‡ªçš„é—®é¢˜ï¼Œä¸‹é¢æˆ‘ä»¬è¿›å…¥æ­£é¢˜ï¼Œæˆ–è®¸ä¼šæ‰¾åˆ°ä½ å¿ƒä¸­çš„é‚£ä¸ªç­”æ¡ˆã€‚</p><h1 id="2964caa9-7f4f-4472-83a1-562cc4fa72e6" class="">ä¸‰ã€Stevedore ä¸ Unity çš„å…³ç³»</h1><h2 id="a8542e12-3906-4c80-93d6-b45e0e5ae860" class="">1ã€å‰ä¸–ä»Šç”Ÿ</h2><p id="e94a28bd-8c2a-428a-a89a-86e60717eb2b" class="">å…³äº Stevedoreï¼Œç»´åŸºç™¾ç§‘ä¸Šçš„è§£é‡Šæ˜¯</p><blockquote id="776cfb3a-216a-42ac-b27c-4a41d0d6a7dd" class="">è£…å¸å·¥æˆ–ç å¤´å·¥äººï¼Œç å¤´å·¥äººæ˜¯ä»äº‹è£…å¸èˆ¹èˆ¶ã€å¡è½¦ã€ç«è½¦æˆ–é£æœºçš„æµ·æ»¨ä½“åŠ›åŠ³åŠ¨è€…ã€‚</blockquote><p id="82e20d05-521d-49c2-bc4f-a42be5ebff69" class="">æˆ‘ä»¬è¿™é‡Œæåˆ°çš„ Stevedore æ˜¯æŒ‡å†…ç½®åœ¨ Bee ä¸­ï¼Œç”¨äºæ›¿ä»£ Mercurial largefiles çš„äºŒè¿›åˆ¶æ–‡ä»¶ç®¡ç†å™¨ã€‚</p><p id="9e56011b-35fc-4ab4-911d-1a63afd54370" class="">Stevedore æ˜¯ä¸€ä¸ªå®šåˆ¶çš„ Unity å·¥å…·ï¼Œç”¨äºå‘å¼€å‘è€…ï¼ˆåŒ…æ‹¬ Unity å‘˜å·¥å’Œæºä»£ç å®¢æˆ·ï¼‰åˆ†å‘å·¥ä»¶ï¼ˆå¤§å‹äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¾‹å¦‚SDKï¼‰ã€‚Stevedore ä½œä¸ºæ„å»ºè¿‡ç¨‹çš„ä¸€éƒ¨åˆ†ï¼ˆå¯¹äº Unity å¼•æ“å’Œå…¶ä»– Unity é¡¹ç›®ï¼‰ï¼Œé€šè¿‡ HTTP æŒ‰éœ€ä¸‹è½½å¿…è¦çš„å·¥ä»¶ã€‚</p><h2 id="878ffcb4-ce84-4b39-8a45-0292fc2eaee1" class="">2ã€ä¸ºä»€ä¹ˆé€‰æ‹© Stevedore</h2><p id="943ad7c8-474d-41ba-89f1-3fd6c180c100" class="">åœ¨æ—©äº›æ—¶å€™è¿˜æ²¡æœ‰ä½¿ç”¨ Stevedore ä¹‹å‰ï¼Œå¯¹äºäºŒè¿›åˆ¶æ–‡ä»¶çš„ç®¡ç†ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯é›†æˆåœ¨ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼ˆVCSï¼‰çš„ å¤§æ–‡ä»¶ç®¡ç†å·¥å…·ï¼ˆMercurial largefiles æˆ–ç›¸å½“äº Git çš„ Git LFSï¼‰ã€‚ä½¿ç”¨å®ƒä»¬çš„å¥½å¤„å°±æ˜¯å‡ ä¹ä¸ç”¨é¢å¤–å†é›†æˆå…¶ä»–ç»„ä»¶ï¼Œå› ä¸ºå®ƒä»¬æ˜¯å†…ç½®åœ¨ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆVCSï¼‰ä¸­çš„ã€‚ä½†é€šè¿‡ä¸€æ®µæ—¶é—´çš„ä½¿ç”¨ï¼Œå¼€å‘å›¢é˜Ÿä¹Ÿå‘ç°äº†ä¸€äº›å­˜åœ¨é—®é¢˜ï¼Œä¸‹é¢å°±æ˜¯å½“æ—¶çš„å…³äºå¦‚ä½•é€‰æ‹©äºŒè¿›åˆ¶æ–‡ä»¶çš„ç®¡ç†å·¥å…·ï¼Œåšçš„ä¸€äº›è°ƒç ”å’Œè®¨è®ºã€‚</p><p id="1fc033f8-e699-4b26-b899-d4b2098fea79" class="">é¦–å…ˆåœ¨ä½¿ç”¨ Mercurial largefilesï¼ˆæˆ–è€… Git LFSï¼‰ï¼ˆå³ä¸‹æ–‡ä¸­çš„ â€œå®ƒâ€ï¼‰ ä¸­é‡åˆ°äº†å¦‚ä¸‹çš„é—®é¢˜ï¼š</p><ul id="66bc3262-63ad-41c1-8e17-cd8bcfb0e80a" class="bulleted-list"><li>å®ƒä¸ VCS çš„å…³è”æ€§å¾ˆå¤§</li></ul><ul id="cb2f8d46-e345-449e-83b1-fd3968270ac3" class="bulleted-list"><li>å®ƒå’Œä»“åº“çš„ç‰ˆæœ¬å…³ç³»å¯†åˆ‡ï¼ˆä¸ªäººç†è§£ï¼Œå¦‚æœæ¯ä¸ªç‰ˆæœ¬å¯¹åº”çš„ä¾èµ–å·¥ä»¶ä¸æ˜¯åŒä¸€ä¸ªç‰ˆæœ¬ï¼Œé‚£ä¹ˆå°†ä¼šåœ¨å¤§æ–‡ä»¶ç³»ç»Ÿçš„ç¼“å­˜ä¸­å­˜åœ¨å¤šä¸ªä¸åŒç‰ˆæœ¬çš„å¤§æ–‡ä»¶ï¼Œéšç€ç‰ˆæœ¬çš„å¢å¤šï¼Œè¿™æ ·ä¼šè®©å¤§æ–‡ä»¶ç³»ç»Ÿçš„ç¼“å­˜è¶Šæ¥è¶Šå¤§ã€‚ï¼‰</li></ul><ul id="355a0d1b-5bf8-4bb2-b519-6fd8c18d4b44" class="bulleted-list"><li>å®ƒå°†å·¥ä»¶ç½®äºä¸ä»£ç ç›¸åŒçš„å®¡æŸ¥è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨è¿‡ç¨‹ä¸­æˆ‘ä»¬å‘ç°è¿™æ ·çš„å®¡æŸ¥æ˜¯ä¸å……åˆ†çš„ã€‚</li></ul><ul id="a3b4263d-c328-4722-b27c-a77f6fefa8bb" class="bulleted-list"><li>å®ƒä¼šæŠŠæ‰€æœ‰å­˜åœ¨äºä»“åº“ä¸­çš„å·¥ä»¶å…¨æ•°ä¸‹è½½ï¼Œå…¶ä¸­è¿˜åŒ…æ‹¬ä¸€äº›æ ¹æœ¬æ— æ³•ä½¿ç”¨çš„å·¥ä»¶ï¼ˆåŸºäºå¹³å°ç›¸å…³çš„å·¥ä»¶ï¼‰ï¼Œè¿™æ ·æ˜æ˜¾ä¸åˆç†ï¼Œå¹¶ä¸”åœ¨ç½‘é€Ÿä¸ç†æƒ³çš„æƒ…å†µä¸‹ä¼šè®©æ‹‰å–ä»“åº“çš„é€Ÿåº¦å˜å¾—å¾ˆæ…¢ã€‚</li></ul><ul id="2a0afd47-37d1-4108-a103-87b6198f5e8f" class="bulleted-list"><li>å®ƒå¯¼è‡´äº†å¾ˆå¤šä¸å¿…è¦çš„å·¥ä»¶æ‹·è´</li></ul><ul id="7ea74aa7-0a44-43bf-88d3-effa3caf22ca" class="bulleted-list"><li>ç°æœ‰çš„è§£å†³æ–¹æ¡ˆä¸æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼ˆå¯¹äºè¿æ¥ä¸ç¨³å®šçš„ç”¨æˆ·æ¥è¯´è¿™æ˜¯ä¸ªå·¨å¤§çš„é—®é¢˜ï¼‰</li></ul><p id="afa3134b-7d39-42bf-b04e-919cc9333ff7" class="">
å› ä¸ºæœ‰ä¸Šé¢è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬å†³å®šè½¬å‘å®šåˆ¶çš„å·¥å…·ï¼Œè€Œä¸æ˜¯ç°æˆçš„è§£å†³æ–¹æ¡ˆï¼Œå› ä¸ºæœ‰ä¸€äº›éæ ‡å‡†çš„è¦æ±‚ï¼šæ”¯æŒå¤§å‹å·¥ä»¶ï¼ˆ1GBä»¥ä¸Šï¼‰ï¼Œæ”¯æŒæ›´ç»†é¢—ç²’åº¦çš„è®¿é—®æ§åˆ¶ï¼ˆç”¨æˆ·åœ¨è®¿é—®çº§åˆ«ä¸Šæ›´ç»†è‡´çš„åŒºåˆ†ï¼‰ï¼Œä»¥åŠè‡ªå®šä¹‰æˆæƒåè®®ï¼ˆOAuthï¼‰ã€‚
ä¸€ä¸ªå…³é”®çš„ç»†èŠ‚æ˜¯ï¼ŒStevedore å®¢æˆ·ç«¯å°†ï¼ˆè‡³å°‘åœ¨æŸäº›éƒ¨ç½²ä¸­ï¼Œå¦‚ä¸»è¦çš„ Unity èµ„æºåº“ï¼‰ä¸æºä»£ç ä¸€èµ·è¢«ç‰ˆæœ¬åŒ–ã€‚å› æ­¤ï¼Œå®¢æˆ·ç«¯ä¸€æ—¦éƒ¨ç½²ï¼Œå¿…é¡»è¢«è§†ä¸ºé•¿æœŸæœ‰æ•ˆçš„ç‰ˆæœ¬ï¼›è€Œä¸”åŸºç¡€è®¾æ–½å¿…é¡»ç¡®ä¿ä¸æ—§çš„å®¢æˆ·ç«¯å‘åå…¼å®¹ï¼ˆå¦åˆ™ç»“æœå°†æ˜¯æ—§çš„åˆ†æ”¯ä¸å†æ„å»ºï¼‰ã€‚</p><ul id="07f5d309-a143-4958-a2cf-6efe6c43b720" class="bulleted-list"><li>æ”¯æŒå¤§å‹å·¥ä»¶ï¼ˆ1GBä»¥ä¸Šï¼‰</li></ul><ul id="cf27ad79-f9e6-4fc7-bc6a-79ae598337a6" class="bulleted-list"><li>æ”¯æŒæ›´ç»†é¢—ç²’åº¦çš„è®¿é—®æ§åˆ¶ï¼ˆç”¨æˆ·åœ¨è®¿é—®çº§åˆ«ä¸Šæ›´ç»†è‡´çš„åŒºåˆ†ï¼‰</li></ul><ul id="d7cfeed2-a405-40b5-9891-7d8e458f2792" class="bulleted-list"><li>æ”¯æŒè‡ªå®šä¹‰æˆæƒåè®®ï¼ˆOAuthï¼‰</li></ul><p id="733f89a7-a846-4b06-8379-53b21d1df87f" class="">ä¸€ä¸ªå…³é”®çš„ç»†èŠ‚æ˜¯ï¼ŒStevedore å®¢æˆ·ç«¯å°†ï¼ˆè‡³å°‘åœ¨æŸäº›éƒ¨ç½²ä¸­ï¼Œå¦‚ä¸»è¦çš„ Unity èµ„æºåº“ï¼‰ä¸æºä»£ç ä¸€èµ·è¢«ç‰ˆæœ¬åŒ–ã€‚å› æ­¤ï¼Œå®¢æˆ·ç«¯ä¸€æ—¦éƒ¨ç½²ï¼Œå¿…é¡»è¢«è§†ä¸ºé•¿æœŸæœ‰æ•ˆçš„ç‰ˆæœ¬è¢«å›ºå®šä½ï¼›è€Œä¸”åŸºç¡€è®¾æ–½å¿…é¡»ç¡®ä¿ä¸æ—§çš„å®¢æˆ·ç«¯å‘åå…¼å®¹ï¼ˆå¦åˆ™ç»“æœå°†æ˜¯æ—§çš„åˆ†æ”¯ä¸å†æ„å»ºï¼‰ã€‚</p><p id="7b6ed5df-f1bb-4665-b613-75ccadaaf7a6" class="">
</p><p id="9f7fd62b-f591-4a83-bfc3-27b296e77293" class="">å¯¹äºéªŒè¯ Stevedore æ˜¯å¦æ˜¯æˆ‘ä»¬æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œæˆ‘ä»¬çš„å¼€å‘å›¢é˜Ÿåšäº†å¦‚ä¸‹å¯¹æ¯”ï¼Œå¯¹æ¯”å›¾å¦‚ä¸‹ï¼š</p><figure id="07abeb58-014c-4bde-a521-89671f1e1d45" class="image"><a href="index/Untitled%207.png"><img style="width:1272px" src="index/Untitled%207.png"/></a></figure><p id="c73f63d7-79b1-4307-a6a7-ec2db40fdd10" class="">æˆ‘ä»¬ä¸»è¦çœ‹ä¹‹å‰å¹¿æ³›ä½¿ç”¨çš„ Hg largefiles å’Œ ç°åœ¨æ­£åœ¨ä½¿ç”¨çš„ Stevedore in Beeï¼Œæˆ‘ä»¬ä¸€é¡¹é¡¹çœ‹ï¼š</p><ol type="1" id="161a9363-1c10-4f9a-9443-4852dc5f834f" class="numbered-list" start="1"><li>å·¥å…·çš„é›†æˆ<p id="6f2dff15-ea33-4cfb-92a2-523d44320cd0" class=""><strong>Largefilesï¼š</strong>largefiles æ˜¯ Mercurial çš„å†…ç½®åŠŸèƒ½ï¼Œæˆ‘ä»¬åªè¦é€‰æ‹©äº† Mercurialï¼Œé‚£ä½¿ç”¨ largefiles å°†ä¸å†éœ€è¦å…¶ä»–é¢å¤–çš„ä¾èµ–ã€‚</p><p id="7927ca2d-3732-4239-a633-1e27d8a09172" class=""><strong>Stevedore in Beeï¼š</strong>Stevedore æ˜¯ Bee ä¸­çš„ä¸€ä¸ªå·¥å…·ï¼Œå¹¶ä¸”å®ƒè¿˜ä¾èµ–äºå…¶ä»–è½¯ä»¶ï¼Œæ‰€ä»¥ä½¿ç”¨çš„è¯ç›¸è¾ƒäº largefiles æ¡ä»¶è¦æ±‚è¦é«˜ä¸€ç‚¹ã€‚</p></li></ol><ol type="1" id="1cb3599d-8126-4197-9e93-7cd593a33169" class="numbered-list" start="2"><li>å·¥ä»¶çš„è·å–<p id="c5d9b04c-43d5-4ede-9ba4-6f244ca71c68" class=""><strong>Largefilesï¼š</strong>å¤§æ–‡ä»¶éƒ½æ˜¯ä» repo çš„æœåŠ¡å™¨ä¸Šè·å–çš„ï¼Œå¯¹äºå®ƒä»¬çš„ä½ç½®éƒ½æ˜¯ç›¸å¯¹äº repo æœåŠ¡å™¨çš„ï¼Œåªéœ€æä¾›ç›¸å¯¹ä½ç½®å³å¯ã€‚è™½ç„¶ä¸‹è½½æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†å®ƒå¹¶ä¸èƒ½å°†æœºå¯†æ–‡ä»¶å’Œä¸å¤ªæœºå¯†çš„æ–‡ä»¶åšä¸€äº›åŒºåˆ†ã€‚ï¼ˆå¦‚æœä½ çŸ¥é“å“ˆå¸Œå€¼å¹¶æœ‰ä¸€ä¸ªæœåŠ¡å™¨ç™»å½•çš„æƒé™ï¼Œå³ä½¿ä½ æ²¡æœ‰è®¿é—®ç›¸å…³çš„ repo çš„æƒé™ï¼Œä½†æ‰€æœ‰çš„æ–‡ä»¶éƒ½è¿˜æ˜¯å¯ä»¥ä½¿ç”¨ï¼‰</p><p id="c30e8d99-99d6-4b75-80bb-78724fc23bf8" class=""><strong>Stevedore in Beeï¼š</strong>Stevedore ç›¸å¯¹æ¥è¯´æ˜¯åˆ†ç¦»çš„ï¼Œéœ€è¦é…ç½®å·¥ä»¶çš„æŒ‡å®šçš„ä¸‹è½½åœ°å€ã€‚Stevedore å¯ä»¥åœ¨æœåŠ¡ç«¯</p></li></ol><ol type="1" id="c5fa83c6-7bec-48d2-bc50-69582854810b" class="numbered-list" start="3"><li>æ„å»ºç³»ç»Ÿé›†æˆ<p id="2e4e3cc2-459f-40d2-911a-9ac0b61bea79" class=""><strong>Largefilesï¼š</strong>Mercurial ç¡®ä¿ build.zips æ˜¯å¯ç”¨çš„ï¼Œæ„å»ºç³»ç»Ÿæœ‰ä¸€äº›ç‰¹å®šçš„é€»è¾‘æ¥å†³å®šå“ªäº›éœ€è¦è§£å‹ã€‚</p><p id="6e1e8e58-869a-4c0f-9a3b-bb737957b373" class=""><strong>Stevedore in Beeï¼š</strong>åœ¨ Stevedore in Bee çš„æ–¹æ¡ˆä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä¸æ„å»ºç³»ç»Ÿç´§å¯†é›†æˆï¼Œä»¥é¿å…ç”±äºä½¿ç”¨é“¾æ¥è€Œå¯¼è‡´çš„ä¸å®Œæ•´æˆ–ä¸å¿…è¦çš„é‡å»ºã€‚</p></li></ol><ol type="1" id="4e200022-5584-47e3-ba50-d806510d8eaf" class="numbered-list" start="4"><li>å·¥ä»¶çš„æ¥æº<p id="6e43bce2-606e-449b-b5fe-f5d2d73d3bd6" class=""><strong>Largefilesï¼š</strong>Largefiles ä¾èµ–äºå¼€å‘è€…æä¾›ä»–ä»¬è‡ªå·±çš„ build.zipã€‚è™½ç„¶è¿™äº›æ–‡ä»¶åº”è¯¥æ¥è‡ªäºKatanaï¼Œå¹¶ä¸”åº”è¯¥åŒ…å«æºä»£ç çš„ä¿®è®¢ä¿¡æ¯ï¼Œä½†åœ¨å®è·µä¸­å¾€å¾€ä¸æ˜¯è¿™æ ·ï¼Œå¼€å‘è€…ä¼šä¸Šä¼ å„ç§ç»è¿‡å¤„ç†çš„ build.zip æ–‡ä»¶ã€‚é€šè¿‡ç»´æŠ¤ä¸€ä¸ª &quot;Katanaç¥ç¦&quot;ï¼ˆKatana blessedï¼‰çš„ build.zips ç™½åå•ï¼Œå¹¶åœ¨é˜Ÿåˆ—éªŒè¯æ—¶å¯¹å…¶è¿›è¡ŒéªŒè¯æ¥è§£å†³ã€‚</p><p id="c17d315c-df8d-45be-9691-242b90e602fe" class=""><strong>Stevedore in Beeï¼š</strong>Stevedore é€šè¿‡åªå…è®¸ Katana å’Œé€‰å®šçš„ç”¨æˆ·ä¸Šä¼ å·¥ä»¶æ¥è§£å†³å·¥ä»¶æ£€æŸ¥çš„é—®é¢˜ï¼ˆè‡³å°‘å¯¹äºä¸»è¦çš„å­˜å‚¨åº“ï¼‰ã€‚</p></li></ol><ol type="1" id="eb4b0f62-cca7-4b39-9240-e2bec10ef228" class="numbered-list" start="5"><li>æºä»£ç äº§å“å®¡æŸ¥<p id="66a305c8-fe7d-4a62-b470-406f5e38bf8e" class=""><strong>Largefilesï¼š</strong>å› ä¸º build.zips è¢«åµŒå…¥åˆ°ç‰ˆæœ¬åº“ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹ç‰ˆæœ¬åº“è¿›è¡Œå®¡æŸ¥ï¼Œå¹¶åœ¨ä¸å®¢æˆ·å…±äº«ä¹‹å‰åˆ é™¤æœºå¯†å·¥ä»¶ã€‚</p><p id="57af98a6-2e36-4d91-8ddb-3e5fc66e6af0" class=""><strong>Stevedore in Bee</strong>ï¼šStevedore åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå…è®¸æˆ‘ä»¬æŒ‰åŸæ ·åˆ†äº«æ•´ä¸ªç‰ˆæœ¬åº“ã€‚æºä»£ç å®¢æˆ·ä¼šçœ‹åˆ°æœºå¯†å·¥ä»¶çš„å­˜åœ¨ï¼Œä½†ç”±äº Artifactory çš„è®¿é—®æ§åˆ¶ï¼Œå¦‚æœå®ƒä»¬æ²¡æœ‰ç›¸å…³æƒé™ï¼Œä»–ä»¬å°†æ— æ³•ä¸‹è½½ã€‚</p></li></ol><ol type="1" id="5867672f-69e4-47e4-b410-98c3de157dd9" class="numbered-list" start="6"><li>ä¸‹è½½æ—¶æœº<p id="f719c390-a873-41f8-85cf-cff860fb8892" class=""><strong>Largefilesï¼š</strong>åœ¨æ‹‰å–ä»£ç æ—¶ä¸€å¹¶å…¨éƒ¨ä¸‹è½½ã€‚</p><p id="abbcfb52-00da-497f-a3eb-20b05d15a67d" class=""><strong>Stevedore in Beeï¼š</strong>Stevedore åˆ™ä¼šåœ¨æ„å»ºæ—¶æŒ‰éœ€ä¸‹è½½ã€‚</p></li></ol><ol type="1" id="331decdc-4b8b-437a-a3b3-2b568c43e528" class="numbered-list" start="7"><li>ä¸‹è½½çš„æ–‡ä»¶<p id="b68e0955-55c6-4b5e-b75d-ef56482a52d7" class=""><strong>Largefilesï¼š</strong>æ¯ä¸ªå·¥ä»¶éƒ½ä¼šè¢«ä¸‹è½½ï¼Œæ— è®ºç”¨æˆ·æ˜¯å¦éœ€è¦å®ƒæ¥æ„å»ºä»–ä»¬æƒ³è¦çš„ä¸œè¥¿ï¼Œä»¥åŠè¯¥å·¥ä»¶æ˜¯å¦ç”šè‡³å¯ä»¥åœ¨ä»–ä»¬å½“å‰çš„æ“ä½œç³»ç»Ÿä¸Šä½¿ç”¨ã€‚</p><p id="f4c71985-32ac-4aed-ac4e-e2cd12640e12" class=""><strong>Stevedore in Beeï¼š</strong> Stevedore çš„æŒ‰éœ€ä¸‹è½½ï¼Œå°†å¤§å¤§å‡å°‘ç”¨æˆ·éœ€è¦ä¸‹è½½æ„å»ºçš„å·¥ä»¶çš„æ•°é‡ã€‚</p></li></ol><ol type="1" id="70cde9e3-c0a1-4217-815d-3ccbb4aae206" class="numbered-list" start="8"><li>ç£ç›˜ä½¿ç”¨<p id="0c539025-a7d2-405e-94b5-046cd13c160e" class=""><strong>Largefilesï¼š</strong>ä¸å¿…è¦åœ°å·¥ä»¶å°†è¢«å¤åˆ¶åˆ° repo å·¥ä½œç›®å½•ä¸­ï¼Œå°½ç®¡å®ƒä»¬å¯ä»¥ç›´æ¥ä»å¤§æ–‡ä»¶ç¼“å­˜ä¸­è§£å‹ã€‚å¹¶ä¸”å¤§æ–‡ä»¶ç¼“å­˜å¿…é¡»å’Œ repo åœ¨åŒä¸€ä¸ªåˆ†åŒºï¼Œå¦åˆ™ Mercurial ä¼šåˆ›å»ºæ›´å¤šçš„å‰¯æœ¬ã€‚åœ¨æœ€å¥½çš„æƒ…å†µä¸‹ï¼ˆå•ä¸€çš„ repo ä¸å¤§æ–‡ä»¶ç¼“å­˜åœ¨åŒä¸€åˆ†åŒºï¼‰ï¼Œå·¥ä»¶åœ¨ç£ç›˜ä¸Šå‡ºç°ä¸‰æ¬¡ã€‚</p><ol type="1" id="89f7faaf-d381-43f4-8ef6-79427ad319da" class="numbered-list" start="1"><li>åœ¨ç¼“å­˜ä¸­ä½œä¸ºä¸€ä¸ªå‹ç¼©åŒ…</li></ol><ol type="1" id="2b2d627e-95b7-4981-8537-2714e079f730" class="numbered-list" start="2"><li>åœ¨å·¥ä½œç›®å½•ä¸­ä½œä¸ºä¸€ä¸ªå‹ç¼©åŒ…</li></ol><ol type="1" id="ca66286e-4401-46bd-82ec-bfb4519667b8" class="numbered-list" start="3"><li>åœ¨å·¥ä½œç›®å½•ä¸­è§£å‹ã€‚</li></ol><p id="ab6023b4-fa75-4c08-b108-dd1668e38125" class=""><strong>Stevedore in Beeï¼š</strong>Stevedore æ‘†è„±äº†ä¸Šé¢ Largefiles å­˜åœ¨çš„é—®é¢˜ã€‚</p></li></ol><ol type="1" id="1d6edfa6-3740-4387-a005-6c242759e84c" class="numbered-list" start="9"><li>ä¿®æ”¹å·¥ä½œæµç¨‹ï¼ˆæœ¬åœ°ï¼‰<p id="0761a57a-33bc-4592-9155-76ab3ab48a97" class=""><strong>Largefilesï¼š</strong>ç”¨æˆ·å¯ä»¥æ‰‹åŠ¨æˆ–ä½¿ç”¨è„šæœ¬ï¼ˆå¦‚ PhysX çš„ <a href="http://deploy.pl/">deploy.pl</a>ï¼‰å°†æ„å»ºç‰©å¤åˆ¶åˆ°é€‚å½“çš„ä½ç½®ã€‚è¿™æ˜¯éå¸¸ä¸´æ—¶æ€§çš„ï¼Œæ“ä½œèµ·æ¥å¾ˆç®€å•ã€‚</p><p id="0ba9dcad-3a05-4cf3-b5f6-a9a7b3b5db24" class=""><strong>Stevedore in Beeï¼š</strong>Stevedore in Bee çš„æ–¹æ¡ˆä¸­ï¼Œæˆ‘ä»¬éœ€è¦å‡†ç¡®åˆ†æï¼Œå¦‚æœä¸ªåˆ«å·¥ä»¶æ–‡ä»¶è¢«ä¿®æ”¹ï¼Œè€Œä¸æ›´æ–° .StevedoreVersion æ–‡ä»¶çš„è¯ï¼Œæ„å»ºç³»ç»Ÿä¼šæœ‰ä»€ä¹ˆè¡¨ç°ï¼Œç›®å‰è¿˜ä¸æ¸…æ¥šã€‚</p></li></ol><ol type="1" id="9622088c-27c8-4517-8042-f81e5d8f62a2" class="numbered-list" start="10"><li>ä¿®æ”¹å·¥ä½œæµç¨‹ï¼ˆABVï¼‰<p id="52bae3f4-453e-420c-a7eb-00324c148dbb" class=""><strong>Largefilesï¼š</strong>ç”¨æˆ·åœ¨ Katana ä¸Šæ„å»ºä¸€ä¸ªæ–°çš„ build.zipï¼Œä» Katana ä¸‹è½½ï¼Œåœ¨ä¸» repo ä¸­æäº¤ï¼Œå†å°†æ–‡ä»¶æ¨é€åˆ° Onoï¼Œç„¶åå¯åŠ¨ ABV åšä¸€ä¸ªéªŒè¯ã€‚</p><p id="8e00cf7e-a428-4f4b-9843-04919e5a2c02" class=""><strong>Stevedoreï¼š</strong>Stevedore é€šè¿‡è®© Katana ç›´æ¥ä¸Šä¼ å·¥ä»¶åˆ° Artifactoryï¼Œæ‘†è„±äº†è¿™ä¸ªæ„šè ¢çš„ &quot;å…ˆä¸‹è½½ï¼Œåä¸Šä¼  &quot;çš„è¿‡ç¨‹ã€‚Katana æ„å»ºå™¨æä¾›äº†æ–°çš„ build.zip åç§°å’Œç‰ˆæœ¬ï¼Œç”¨æˆ·å°†å…¶ç²˜è´´åˆ°æ¸…å•ä¸­ï¼Œæäº¤ï¼Œæ¨é€ï¼Œå¹¶å¯åŠ¨ ABVã€‚é™¤éç”¨æˆ·æƒ³åœ¨æœ¬åœ°è¿›è¡Œæµ‹è¯•ï¼Œå¦åˆ™å·¥ä»¶æ°¸è¿œä¸éœ€è¦ä¸‹è½½åˆ°ç”¨æˆ·çš„ç”µè„‘ä¸Šã€‚</p></li></ol><h2 id="788cf38c-26d2-4ed5-8311-3357ae3a1299" class="">3ã€ç›¸å…³èµ„æ–™</h2><p id="3d857ff6-335a-4446-8190-b98a09991973" class=""><a href="https://stevedore.unity3d.com/">Stevedore - Package Management System</a></p><p id="ca2293f8-eaa8-42db-aa8c-8b82ff6d9f6e" class=""><a href="https://confluence.unity3d.com/display/BST/Stevedore+-+Package+Delivery+Service">Stevedore - Package Delivery Service</a></p><p id="6fe3444c-8c90-40c7-9441-4f9b516c5d95" class=""><a href="https://confluence.unity3d.com/pages/viewpage.action?pageId=102667591">Development Guide (Stevedore - Package Manager)</a></p><p id="fff913e8-3494-4a86-b293-11e53777330a" class=""><a href="https://confluence.unity3d.com/pages/viewpage.action?pageId=105762428">Project Guide (Stevedore - Package Manager)</a>
<a href="https://docs.google.com/document/d/1koAUuidVsBnnlDFavUvHEqtGHS9hpRRmYjSkIX7kJyQ/edit#heading=h.8s6unqu359mf">Plans for a Dependency Manager - Google Docs</a></p><p id="4e4521da-f696-430b-aaea-bd2945bd33f6" class=""><a href="https://docs.google.com/document/d/1rfIP-Ncoj8OZUXhfBRyxLEIqIohXHL5ODjBP7KYY6PA/edit#heading=h.3uq8sp3vx23g">Stevedore artifact publishing guidelines - Google Docs</a></p><p id="5f1f04b1-4532-4df5-922e-ab1502cda8f4" class=""><a href="https://github.cds.internal.unity3d.com/unity/bee/blob/main/Bee.Stevedore.Program/StevedoreConfig.cs">Stevedoreç”¨åˆ°çš„URL</a>
<a href="https://github.cds.internal.unity3d.com/unity/stevedore-csharp-uploadtool">C#ç‰ˆä¸Šä¼ åˆ°Stevedoreå·¥å…·</a></p><p id="9b8e1347-7900-43db-834e-4b6af2e67270" class=""><a href="https://github.cds.internal.unity3d.com/unity/repack-visual-studio">é€šè¿‡yamatoéƒ¨ç½²åˆ°stevestoreçš„demo</a></p><figure id="ecf2fed8-ab86-43cd-ae75-f8484fd9b1bc"><a href="https://artifactory.prd.it.unity3d.com/ui/repos/tree/General/stevedore-unity-internal" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title"></div></div><div class="bookmark-href">https://artifactory.prd.it.unity3d.com/ui/repos/tree/General/stevedore-unity-internal</div></div></a></figure><p id="381c17d9-3baa-493f-a586-794beec12683" class="">
</p><p id="508f2608-155d-454a-aa90-1fb6c6a8827d" class=""><a href="https://docs.google.com/document/d/1gmDWiu93Xm0TOxLNTSb1jI5kn55SEboRu0VCbJgUdCQ/edit#">Stevedore (DepMan) Background - Google Docs</a></p><p id="2fa7957d-fd35-4ba4-a423-2e63ebea6b1c" class=""><a href="https://docs.google.com/document/d/1fIaPkECGCAJYZpksUuphWUiBHHNq3wKwVXQZa4YCAqI/edit#heading=h.bb4wq96mklm1">Stevedore infrastructure - Google Docs</a>
<a href="https://github.cds.internal.unity3d.com/unity/stevedore-infra">Stevedore æœåŠ¡</a></p><h1 id="5bf5a4ad-298c-403a-96c6-42ca32686d92" class="">å››ã€ä¹Ÿæ¥çœ‹çœ‹Stevedoreçš„æ¶æ„</h1><h2 id="60565d0f-af4b-411f-aec9-f1bf9e7b1ac1" class="">1ã€Artifactsçš„ç®¡ç†å’Œä¸‹è½½æœåŠ¡</h2><ul id="14fb226d-5377-4b31-80ec-2f7f0af98cc1" class="bulleted-list"><li>ä¸‹è½½ Artifacts éœ€è¦ä¸¤ä¸ªé‡è¦ä¿¡æ¯ï¼š ArtifactID å’Œ RepoNameã€‚<ul id="433e73c3-a2c6-40a8-919b-fce079caa2b5" class="bulleted-list"><li>ArtifactIDï¼š  Artifact çš„å”¯ä¸€æ ‡è¯†ï¼Œæ ¼å¼ä¸º <code>{filename}-{platform}-{architecture}/{version.number}_{file_hash}.zip(7z)</code></li></ul><ul id="bb821b75-b9db-4a7f-90ab-bff9a0f9c63f" class="bulleted-list"><li>RepoName : ç”¨æ¥æ ‡è¯†ä¸‹è½½ URL çš„å‰ç¼€ï¼Œä¸ä¸‹æ–‡çš„&quot;ä¿å¯†ç­‰çº§&quot;ç›¸å…³</li></ul></li></ul><ul id="900ad899-702f-4b3b-a2a8-732a1b9481be" class="bulleted-list"><li>ä¸‹è½½ Artifact éœ€è¦ä¼ å…¥ Auth ä¿¡æ¯ï¼Œæ ¹æ®è¯·æ±‚æ–¹å¼ä¸åŒï¼Œåˆ†ä¸ºï¼š<ul id="64722404-cd55-4417-a9bd-884f7c9a97c3" class="bulleted-list"><li>åŸºäº Header çš„ Authorization</li></ul><ul id="5aea34ae-b10c-4603-8eb3-3e865c279e37" class="bulleted-list"><li>HTTP basic authorization</li></ul><ul id="83ef9339-513b-40b8-964f-84d5b8c4992f" class="bulleted-list"><li>OAuth authorization</li></ul></li></ul><h2 id="dc61f7cd-a435-40f5-8828-9e33a62e0de4" class="">2ã€Confidential &amp; Access Control</h2><h3 id="c50c8b1d-d8cf-4b7d-8d49-2d1a75c66025" class="">Artifact æˆ‘ä»¬æœ‰äº”ä¸ªä¿å¯†ç­‰çº§ï¼š</h3><ol type="1" id="cc1388f4-0f5e-4b96-83f7-5b2bdadcedb9" class="numbered-list" start="1"><li>pulicï¼šæˆ‘ä»¬å¯ä»¥ä¸å—é™åˆ¶åœ°åˆ†äº«çš„å·¥ä»¶ï¼ˆå¼€æºè½¯ä»¶ï¼‰ã€‚</li></ol><ol type="1" id="e7eaeb22-6ac1-4326-b7bb-e90098a46635" class="numbered-list" start="2"><li>mainï¼šä¸»è¦çš„ Unity ä»£ç åº“å’Œé€šç”¨å·¥ä»¶ï¼Œæ‰€æœ‰ Unity å‘˜å·¥å’Œæºä»£ç å®¢æˆ·éƒ½å¯ä»¥ä½¿ç”¨ã€‚</li></ol><ol type="1" id="13a451c2-c177-4ba3-9b59-06371c91c4b2" class="numbered-list" start="3"><li>unity-internalï¼šä¸å®Œå…¨æ˜¯ç§˜å¯†å·¥ä»¶ï¼Œä½†ä¸èƒ½ä¸æºä»£ç å®¢æˆ·åˆ†äº«ï¼ˆå¦‚ï¼šè‹¹æœçš„ SDKï¼‰ã€‚</li></ol><ol type="1" id="a7b6b719-d846-43e4-89b0-a97070fa2e95" class="numbered-list" start="4"><li>consolesï¼šä¸å¾®è½¯ã€ä»»å¤©å ‚ã€ç´¢å°¼è¿™äº›å…¬å¸çš„ä¸»æœºå¹³å°ç›¸å…³çš„å·¥ä»¶ï¼Œåœ¨å‰ç½²å¯¹åº”åè®®ä¹‹å‰ï¼Œä¸èƒ½è·å–ã€‚ </li></ol><ol type="1" id="6a8ee56f-7576-4f97-b637-7fb5b6014d23" class="numbered-list" start="5"><li>â€œengine-wipâ€œï¼šç»å¯¹ä¸å¯ä»¥è¢«å…¬å¼€çš„éƒ¨åˆ†ï¼Œå¦‚æœè¢«å‘ç°ï¼Œä¼šè¿ç§»åˆ°å…¶ä»–åœ°æ–¹å»ã€‚</li></ol><h3 id="e36413f2-381a-4e32-9b5b-19ee87d21fab" class="">ä¿å¯†æ€§ç”±ä¸¤ä¸ªæœºåˆ¶æ¥ä¿éšœï¼š</h3><ul id="75f69ab5-17d3-4255-acad-264a592ee6ab" class="bulleted-list"><li>ç”¨æˆ·å¿…é¡»ç”±å¿…è¦çš„å‡­è¯æ¥è®¿é—®å­˜å‚¨åº“</li></ul><ul id="f1526ddd-8383-432c-a64e-7766ad743e78" class="bulleted-list"><li>ç”¨æˆ·å¿…é¡»çŸ¥é“æ‰€éœ€å·¥ä»¶çš„ç¡®åˆ‡åç§°å’Œ SHA-256 å“ˆå¸Œå€¼ï¼Œä»–ä»¬é€šå¸¸åªèƒ½é€šè¿‡è®¿é—®ç›¸åº”çš„ä»£ç æ¥è·å¾—ï¼Œä½†è¦éµå®ˆå…¶è‡ªèº«çš„ä¿å¯†æœºåˆ¶ã€‚ï¼ˆåœ¨ Stevedore é¡¹ç›®ä¹‹å¤–çš„æƒ…å†µï¼‰</li></ul><blockquote id="d95c1aa3-be55-493e-a359-0c7e92b69073" class="">ä¸ºäº†é˜²æ­¢æšä¸¾æ”»å‡»ï¼ˆenumeration attacksï¼‰ï¼Œåº”è¯¥åœ¨å·¥ä»¶æœåŠ¡å™¨ä¸Šç¦ç”¨ç›®å½•åˆ—è¡¨ï¼ˆæˆ–è€…é™åˆ¶ä¸ºä»…å—ä¿¡ä»»çš„ç”¨æˆ·æ‰èƒ½è®¿é—®ï¼‰ã€‚</blockquote><h3 id="cae77c9e-6835-4c3b-87da-7b1c842cf8d0" class="">è®¿é—®æ§åˆ¶æ‘˜è¦</h3><figure id="9d6d3906-ebc7-411e-8c98-85dc1496af05" class="image"><a href="index/Untitled%208.png"><img style="width:1254px" src="index/Untitled%208.png"/></a></figure><blockquote id="575edc3b-858a-421e-8385-bead77fb1425" class=""><strong>*</strong> åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œç”¨æˆ·å°†çŸ¥é“ç‰¹å®šå·¥ä»¶çš„å­˜åœ¨ï¼ˆåç§°ã€ç‰ˆæœ¬å’Œå“ˆå¸Œå€¼ï¼‰ï¼Œä½†æ— æ³•ä¸‹è½½å®ƒã€‚
<strong>â€ </strong> åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œåªæœ‰ç›¸å…³å¹³å°æ‰€æœ‰è€…æ‰¹å‡†çš„ç‰¹å®šå®¢æˆ·/åˆä½œä¼™ä¼´å¯ä»¥ä¸‹è½½ã€‚å¦‚æœæ²¡æœ‰æ‰¹å‡†ï¼Œé‚£ä¹ˆä»–ä»¬åªèƒ½äº†è§£å·¥ä»¶çš„å­˜åœ¨ã€‚
â€œSpecial Katanaâ€ æ˜¯èƒ½å¤Ÿè®¿é—® â€œengine-wipâ€ æºä»£ç å’ŒäºŒè¿›åˆ¶æ–‡ä»¶çš„å®ä¾‹ï¼Œä½†æ˜¯ä¸èƒ½å…è®¸å®ƒå°†ç§˜å¯†å·¥ä»¶ï¼ˆæ„å¤–åœ°ï¼‰ä¸Šä¼ åˆ°å…¶ä»–å­˜å‚¨åº“ä¸­ã€‚</blockquote><h3 id="6ec42342-bb84-4193-8f30-34b119aaf1dc" class="">å­˜å‚¨åº“æ¸…å•</h3><p id="35ddad00-f59b-457e-b4fc-575952543f3c" class="">æˆ‘ä»¬ä¼šæœ‰ç‹¬ç«‹çš„å­˜å‚¨åº“ï¼Œä»¥æ–¹ä¾¿è®¿é—®ï¼š</p><p id="392c549b-8680-4b40-a8b4-3dc06268b58e" class="">Publicï¼š</p><ul id="dfb4e7d0-9849-4495-a912-23d265a08a45" class="bulleted-list"><li>https://public-stevedore.unity3d.com/r/public/</li></ul><ul id="9b437f10-5d97-4c01-90d0-b854ed68e467" class="bulleted-list"><li>https://main-stevedore.unity3d.com/r/main/</li></ul><ul id="9186ae23-f32e-4691-9654-6e13449201fc" class="bulleted-list"><li>https://unity-internal-stevedore.unity3d.com/r/unity-internal/</li></ul><p id="d53283b8-900f-42d5-abb3-acf6edbd413a" class="">Consolesï¼š</p><ul id="90616b6d-498b-4a45-872f-0393aa4225cc" class="bulleted-list"><li>https://ms-consoles-stevedore.unity3d.com/r/ms-consoles/</li></ul><ul id="aff0f94d-01e0-4c15-9d34-efa280c5dedd" class="bulleted-list"><li>https://sony-consoles-stevedore.unity3d.com/r/sony-consoles/</li></ul><ul id="3a48fe31-eec1-4c84-a3eb-bdde4091f9aa" class="bulleted-list"><li>https://nintendo-consoles-stevedore.unity3d.com/r/nintendo-consoles/</li></ul><p id="985c9386-d14a-499a-837b-66d892b900aa" class="">&quot;engine-wip&quot;ï¼ˆå‡è®¾çš„èŒƒä¾‹ï¼‰ï¼š</p><ul id="f6cd2ad6-4660-4cad-bab8-267929067261" class="bulleted-list"><li>https://neon-stevedore.unity3d.com/r/neon/</li></ul><ul id="19424750-37f2-4bef-8a15-62b79a4d30e4" class="bulleted-list"><li>https://argon-stevedore.unity3d.com/r/argon/</li></ul><ul id="184cb6b2-e0bc-43a2-a41f-26bb2bab0c4a" class="bulleted-list"><li>https://krypton-stevedore.unity3d.com/r/krypton/</li></ul><p id="c6eb8cbe-eec4-4a4e-baed-c1d4624514ae" class="">å¯¹äºæµ‹è¯•ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªåªèƒ½ä»å…¬å¸åŠå…¬å®¤ç½‘ç»œè®¿é—®çš„ç‹¬ç«‹æœåŠ¡å™¨ï¼Œå®ƒå°†æä¾› â€œtestingâ€ èµ„æºåº“ï¼ˆç±»ä¼¼äº unity-internalï¼‰ã€‚</p><ul id="3fa0ffd4-a1d2-47d9-b493-84e7468062ad" class="bulleted-list"><li>http://stevedore.hq.unity3d.com/r/testing/</li></ul><h2 id="c2a1eddc-dadf-417d-ad23-0657e4cc4b05" class="">3ã€Artifact Hosting requirement (ç”¨æˆ·æ•°é‡ï¼Œæµé‡æ§åˆ¶ï¼Œå­˜å‚¨ç®¡ç†ï¼Œä¸Šä¼ æ—¶é—´)</h2><h3 id="2ea3b6ac-87a6-48de-9429-a12cfbd95f14" class="">ç”¨æˆ·æ•°é‡éœ€æ±‚</h3><ul id="c7cec6f6-1a6f-43d5-9143-1f68d55b95d1" class="bulleted-list"><li>çº¦ 1000 å Unity R&amp;D çš„å‘˜å·¥</li></ul><ul id="141187f2-1d4c-4526-84b5-432be3c9cf18" class="bulleted-list"><li>çº¦ 1000 ä¸ªæºä»£ç å®¢æˆ·å’Œ shadow-repo åˆä½œä¼™ä¼´</li></ul><ul id="1b019e01-6a0c-4494-9c4d-09ef0ad536f6" class="bulleted-list"><li>çº¦ 10ä¸‡å Unity Pro ç”¨æˆ·ï¼ˆPro Source å¦‚æœå¾—ä»¥å®ç°ï¼‰</li></ul><ul id="b913ddd7-724c-4c5f-9c1f-5a0352cb75fe" class="bulleted-list"><li>çº¦ 20ä¸‡å Tiny Unity ç”¨æˆ·ï¼ˆä¼°è®¡æ—¥æ´»è·ƒç”¨æˆ·ï¼‰</li></ul><p id="9222ec42-171e-4553-8251-5d1fd512c427" class="">ç”±äº Stevedore çš„ç”¨æˆ·åˆ†å¸ƒåœ¨ä¸–ç•Œå„åœ°ï¼Œè€Œä¸”å¯èƒ½é¢ä¸´ç¼“æ…¢ä¸”ä¸ç¨³å®šçš„ç½‘ç»œç¯å¢ƒï¼Œå› æ­¤åœ¨ç”¨æˆ·é™„è¿‘è®¾ç½®è¾¹ç¼˜èŠ‚ç‚¹çš„ CDN æ˜¯ç»å¯¹æœ‰å¿…è¦çš„ã€‚</p><p id="ac69d392-1a22-4df3-99a5-b9c1db0fb69a" class="">é™¤äº† CDNï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è€ƒè™‘æœ¬åœ°åŠå…¬å®¤é•œåƒï¼Œä½†æ˜¯ä»…ä»…æ˜¯åŠå…¬å®¤é•œåƒè¿˜ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„è§£å†³æ–¹æ¡ˆï¼Œå› ä¸ºå®ƒä»¬ä¸èƒ½å¸®åŠ©åˆ°æºä»£ç å®¢æˆ·å’Œä¸åœ¨åŠå…¬å®¤çš„ Unity å‘˜å·¥ã€‚</p><h3 id="8a3141fa-0c1d-44ed-a80a-a0fe36c33161" class="">æµé‡éœ€æ±‚</h3><p id="72cdafe6-275c-4278-8f79-fb63964b215f" class="">å…¸å‹ç”¨æˆ·çš„ä¸‹è½½é‡é¢„è®¡å¯è¾¾ <strong>20GB/æ¯å¹´</strong> çš„é‡çº§ã€‚</p><h3 id="03ef93e1-291c-4c5a-ad37-bb881ab0bba3" class="">å­˜å‚¨éœ€æ±‚</h3><p id="1c8cfcc8-c385-4783-b62d-a76511982cb3" class="">Ono ç›®å‰åœ¨æ‰€æœ‰åˆ†æ”¯å’Œå­˜å‚¨åº“ä¸­ï¼Œæ–°çš„å·¥ä»¶ï¼ˆå¤§æ–‡ä»¶å½¢å¼ï¼‰æ¯å¹´å¢é•¿çº¦ <strong>500GB </strong>ã€‚Stevedore çš„å­˜å‚¨éœ€æ±‚å¼€å§‹æ—¶æ¯”è¿™å°å¾—å¤šï¼Œä½†æ˜¯éšç€ Stevedore å–ä»£ç°æœ‰çš„å¤§æ–‡ä»¶ï¼Œæœ€ç»ˆå¯èƒ½ä»¥ç±»ä¼¼çš„é€Ÿåº¦å¢é•¿ã€‚</p><p id="3561aa1b-c44b-47e8-8f81-54d240978770" class="">æ­¤å¤–ï¼Œæˆ‘ä»¬æ­£è€ƒè™‘ä½¿å‘å¸ƒæ–°å·¥ä»¶çš„æµç¨‹å˜å¾—æ›´å®¹æ˜“ã€‚</p><h3 id="14cad9d8-8fd7-4358-9279-412d1e477865" class="">æ­£å¸¸è¿è¡Œæ—¶é—´ä¸Šçš„éœ€æ±‚</h3><p id="473e1eda-b567-445e-a71a-732bfaf36a2d" class="">æ­£å¸¸è¿è¡Œæ—¶é—´ä¸Šçš„éœ€æ±‚åº¦ä½ï¼Œç”±äºæœ¬åœ°ç¼“å­˜ï¼Œå³ä½¿æ˜¯å‡ ä¸ªå°æ—¶çš„åœæœºï¼Œé€šå¸¸ä¹Ÿä¸ä¼šå¯¹å¤§éƒ¨åˆ†ç”¨æˆ·é€ æˆå¾ˆå¤§å½±å“ã€‚ç”¨æˆ·ä¹Ÿå¯ä»¥é€šè¿‡åŒäº‹ç›´æ¥çš„æ‹·è´æ¥è·å–ã€‚</p><h3 id="428b8565-8a78-464d-bd0f-70624606e871" class="">è®°å½•/å®¡æŸ¥/æŠ¥è­¦ çš„éœ€æ±‚</h3><ul id="8f0bdbf4-27c7-48f3-ae84-f64055de788a" class="bulleted-list"><li>ä»»ä½•è®°å½•éƒ½å¿…é¡»å®¡æŸ¥æ˜¯å¦ç¬¦åˆ GDPRã€‚</li></ul><ul id="b886f931-7cad-471b-9f35-1a535d0aa4cb" class="bulleted-list"><li>å¸¸è§„çš„å·¥ä»¶ä¸»æœºä¸éœ€è¦ä¿å­˜ä¸‹è½½æ—¥å¿—ã€‚</li></ul><ul id="3ce6e15b-f1bc-4e5a-99f3-ebb7e72809a1" class="bulleted-list"><li>å¯¹äºç‰¹åˆ«æ•æ„Ÿçš„ï¼ˆâ€œengine-wipâ€ï¼‰å­˜å‚¨åº“ï¼Œå¯èƒ½éœ€è¦ä¿å­˜ä¸‹è½½æ—¥å¿—ã€‚</li></ul><h2 id="fbc3cd44-f16a-403d-bfc5-01c0e6001c40" class="">4ã€OAuth and authorization</h2><p id="c30ef984-1332-4196-99be-2c25e15b522a" class="">ç›®å‰Unityæ˜¯ä½¿ç”¨OAuthçš„æ–¹æ³•ã€‚stevedoreå¹¶ä¸ç›´æ¥ä»ç”¨æˆ·è¿™é‡Œè·å–å‡­è¯(credential)ï¼Œè€Œæ˜¯ç”±googleè¿›è¡ŒéªŒè¯ã€‚éšåç”¨æˆ·å°†googleæ‰€ç¡®è®¤çš„å‡­è¯ä¼ ç»™stevedoreï¼Œè€Œstevedoreå†ä¸googleæ‰€ä¼ é€’çš„å‡­è¯æ˜¯å¦æœ‰æ•ˆã€‚ä»¥ä¸‹ä¸ºWebsite login flowä¸»è¦æµç¨‹ç¤ºæ„å›¾ã€‚</p><figure id="5da450de-2bc1-49d7-915b-2384167b1080" class="image"><a href="index/Untitled%209.png"><img style="width:1061px" src="index/Untitled%209.png"/></a></figure><p id="6d88f74b-5601-4536-9891-1e7b7d43299b" class="">åœ¨infraçš„æºç ä¸­ï¼Œ<code>service/stevedore/www/__main__.py</code>æ‰€è¿è¡Œçš„wwwæœåŠ¡ã€‚å¯åœ¨<code>services/stevedore/www/flows</code>ä¸‹çœ‹åˆ°<code>noborwer.py</code>, <code><a href="http://interactiveclientlogin.py/">interactiveclientlogin.py</a></code>, ä»¥åŠ<code><a href="http://websitelogin.py/">websitelogin.py</a></code>ã€‚å…¶ä¸­websiteloginä¸ºæœ€ä¸»è¦çš„ï¼Œå…¶ä»–ä¸ºæ— æ³•æ­£å¸¸å·¥ä½œçš„fallbackã€‚</p><ol type="1" id="22d4cf68-68f5-4678-acfb-b0a4e847171b" class="numbered-list" start="1"><li>ç”¨æˆ·è®¿é—®æŸèµ„æºAï¼Œå‘ç°ç¼ºå°‘tokenï¼Œè¢«é‡å®šå‘è‡³googleï¼Œè¾“å…¥éªŒè¯ï¼Œå¹¶è·å–ç›¸åº”çš„authã€‚ </li></ol><ol type="1" id="05900beb-a15c-4dde-b965-a4cc9861e1a6" class="numbered-list" start="2"><li>ç”¨æˆ·è®¿é—®stevedoreç«¯å£è·å–ä¼ é€’googleç»™çš„authã€‚<code>@endpoint_registry(&#x27;GET&#x27;, &#x27;/&#x27;, &#x27;code&#x27;, authz=http.authz_public)</code>ã€‚</li></ol><ol type="1" id="a2a9b55b-ee45-4d06-8d48-392ebace566d" class="numbered-list" start="2"><li>åœ¨éªŒè¯ä¸­ä¼šå…ˆæ£€æŸ¥å¯¹åº”çš„hashï¼Œç¡®è®¤stateæˆ–sessionæ˜¯æ­£ç¡®çš„ã€‚</li></ol><ol type="1" id="31ea6e37-be41-42fc-a621-a451228a6565" class="numbered-list" start="3"><li>å‘é€postè¯·æ±‚ç¡®è®¤<code>token_url = &#x27;</code><code><a href="https://www.googleapis.com/oauth2/v4/token">https://www.googleapis.com/oauth2/v4/token</a></code><code>&#x27;</code>ï¼Œç”¨jwtå¯¹è·å–åˆ°çš„id_tokenè§£æï¼Œç¡®è®¤éªŒè¯æ˜¯å¦æ­£ç¡®ã€‚å°†ç”¨æˆ·é‡å®šå‘è‡³èµ„æºAã€‚<p id="530c1f43-2bea-4fc5-b7b8-c03dcad4a411" class="">
</p></li></ol><pre id="441c9a83-1ee1-47a8-9d36-712dbcef2248" class="code"><code>def backend_authorization_response(cfg, req, backend_state):
    &quot;&quot;&quot; Verify that user was authenticated with backend. &quot;&quot;&quot;
    # Verify state / session.
    session_id = req.cookies.get(authn_session_cookie_name, &#x27;&#x27;)
    try:
        expected_session_hash = hashlib.sha256(util.base64url_decode(session_id)).digest()
        if not hmac.compare_digest(backend_state.session_hash, expected_session_hash):
            raise ValueError(&#x27;hash mismatch&#x27;)

    except ValueError:
        logger.warn(&#x27;AuthzWebsite: bad state %r, or mismatch with cookie %r = %r&#x27;, backend_state, authn_session_cookie_name, session_id, exc_info=True)
        # To prevent us from being a semi-open redirect, don&#x27;t redirect to the URL in backend_state.
        raise webob.exc.HTTPBadRequest(&#x27;Bad &quot;state&quot; or session cookie.&#x27;)

    req.delete_cookie(authn_session_cookie_name)

    # Verify auth code with backend authn server
    result = cfg.backend.exchange_authorization_grant(
        &#x27;authorization_code&#x27;,
        code=http.extract(req.GET, &#x27;code&#x27;, encoding=None),
        redirect_uri=cfg.backend.client_registration.redirect_uri,
    )
    login_token = cfg.website_login_session.make(
        email=result.email,
        u_refresh_token=result.refresh_token or &#x27;&#x27;,
    )
    req.set_cookie(login_session_cookie_name, login_token.decode(&#x27;ascii&#x27;))

    if backend_state.need_refresh_token and not result.refresh_token:
        raise webob.exc.HTTPForbidden(&#x27;Backend authentication server did not provide a refresh token.&#x27;)

    raise http.redirect(backend_state.redirect_url)</code></pre><h2 id="ac370bef-bb6c-4d13-a675-8a6324fb6ed1" class="">5ã€CDN and local office mirrors</h2><p id="70bdf53d-05e0-482a-a4d4-865eeecb7044" class="">
</p><figure id="f1869474-e9ee-4070-b06a-58235b75d4d1" class="image"><a href="index/Untitled%2010.png"><img style="width:1954px" src="index/Untitled%2010.png"/></a></figure><figure id="ee6c6315-9f00-4048-a971-64c4d33b4a27" class="image"><a href="index/Screen_Shot_2021-08-29_at_10.53.35_PM.png"><img style="width:1796px" src="index/Screen_Shot_2021-08-29_at_10.53.35_PM.png"/></a></figure><ul id="1e557ef0-e359-4d47-9d4d-2542f9279629" class="bulleted-list"><li><code>jam steve config</code> æ£€æŸ¥ç›®å‰ä½¿ç”¨çš„stevedoreè®¾ç½®<pre id="0bbeeea9-965d-47b4-bf1b-07c27203935f" class="code"><code>PS F:\Unity\git\unity&gt; .\jam steve config
Config files:
  C:\Users\siyao\Stevedore.conf (not present)

Configuration:
  cache-folder = C:\Users\siyao\AppData\Local\Stevedore
  cache-folder.group-by-repo = false
  telemetry = anonymous
  telemetry.url = https://telemetry-stevedore.unity3d.com/v1/events
  timeout = 20000
  repo:* retries = 4
  repo:public = http://localhost:8080/r/public/ https://public-stevedore.unity3d.com/r/public/ https://public-stevedore.unitychina.cn/r/public/
  repo:testing = http://stevedore.hq.unity3d.com/r/testing/
  repo:unity-internal = http://stevedore.hq.unity3d.com/r/unity-internal/</code></pre></li></ul><p id="86f4c788-c63c-443f-bb72-e2171305fbcc" class=""><a href="https://unity.slack.com/archives/C1TGPS7UY/p1629275976045400">https://unity.slack.com/archives/C1TGPS7UY/p1629275976045400</a>
è¿è¡Œæœ¬åœ°ç¼“å­˜</p><p id="0bec54d2-320a-4d94-abba-5398c54290d9" class=""><a href="https://github.cds.internal.unity3d.com/unity/stevedore-infra/tree/master/cache-server">https://github.cds.internal.unity3d.com/unity/stevedore-infra/tree/master/cache-server</a></p><p id="d282a39c-6262-4dc7-aae1-d431e1e76501" class="">å¯ä»¥çœ‹å‡ºæœ¬åœ°ç¼“å­˜åœ¨AppDataçš„localä¸‹ã€‚è€Œæœ¬åœ°èµ·çš„cacheç«¯å£ä¸º8080ï¼Œå¹¶ä¸”æ³¨æ„æ”¾repo:public æ—¶è¦åŠ ä¸Š<code>/r/public</code> ã€‚å¦‚ä¸Š <code>repo:public = </code><a href="http://localhost:8080/r/public/"><code>http://localhost:8080/r/public/</code></a> ï¼Œä¼šé¡ºå»¶ç€ï¼Œç¬¬ä¸€ä¸ªæ‰¾ä¸åˆ°ï¼Œæ¢ä¸Šç¬¬äºŒä¸ªã€‚</p><p id="251e37de-0e47-4e8c-8d2c-8b657b93d88e" class="">å‚è€ƒï¼š<div class="indented"><p id="5536cb12-d420-485c-a94e-dbfbb41a5e00" class="">https://github.cds.internal.unity3d.com/unity/bee/Bee.Stevedore.Program/StevedoreConfig.cs</p><pre id="6b93fdda-926d-4df5-8a67-e04ab579075e" class="code"><code>readonly Dictionary&lt;RepoName, RepoConfig&gt; m_RepoConfigs = new()
{
    { RepoName.Public, new RepoConfig(&quot;https://public-stevedore.unity3d.com/r/public/&quot;, &quot;https://public-stevedore.unitychina.cn/r/public/&quot;) },
    { (RepoName)&quot;testing&quot;, new RepoConfig(&quot;http://stevedore.hq.unity3d.com/r/testing/&quot;) },
    { (RepoName)&quot;unity-internal&quot;, new RepoConfig(&quot;http://stevedore.hq.unity3d.com/r/unity-internal/&quot;) },
};</code></pre></div></p><p id="1a3d09cf-a378-4ea9-9b76-f1ca3ad8241b" class="">
</p><p id="d43d0ed9-931c-4f51-b5ba-99db3a3facd8" class="">
</p><h1 id="9a9905ef-1357-4f50-a698-717d0d2792a4" class="">äº”ã€ä¼˜é›…çš„ä½¿ç”¨å¹¶å‰–æStevedore</h1><h2 id="9c314b4a-a697-446a-aff2-5e2be8979bef" class="">1ã€Stevedore repositories ç§ç±»</h2><p id="b1da4715-7420-4d01-9149-3b77945b194f" class="">
</p><p id="954e6af4-01fe-4b9b-9908-1e35816afad7" class="">ä½¿ç”¨å’Œå‰–æä¹‹å‰æˆ‘ä»¬éœ€è¦äº†è§£Stevedore repositories ç§ç±»å¦‚ä¸‹ï¼š</p><ul id="2faa0bb8-5f80-46ad-8f34-a63c0e5f9d72" class="bulleted-list"><li>testing:   ä»…é™unityå‘˜å·¥, å¯ä»¥è‡ªç”±ä¸Šä¼ åˆ°è¯¥repoä¸‹;</li></ul><ul id="0e2fa3b8-52c2-4fbc-91d1-ab567bbf7b2e" class="bulleted-list"><li>unity-internal:  ä»…é™unityå‘˜å·¥</li></ul><ul id="a54bcfcf-dd6c-4065-b6fe-ab7720a23afc" class="bulleted-list"><li>public: ä¸è¦æ±‚è®¤è¯æƒé™ (å‘˜å·¥, æºä»£ç å®¢æˆ·å’Œåˆä½œä¼™ä¼´)</li></ul><ul id="22a91846-56de-4adb-8c25-e4a014814c21" class="bulleted-list"><li>main:  å¯ä¾›å‘˜å·¥å’Œæ‰€æœ‰æºä»£ç å®¢æˆ·ä½¿ç”¨, ä½†éœ€è¦è®¤è¯;</li></ul><ul id="bb9cb355-1032-4d3a-b670-92ab800c14e3" class="bulleted-list"><li>*-consoles: å¯ä¾›å‘˜å·¥å’Œå·²ç”¨äºè¯¥å¹³å°æƒé™çš„ï¼ˆMicrosoft/Nintendo/Sonyï¼‰æºä»£ç å®¢æˆ·è®¿é—®, ä¹ŸåŒæ ·éœ€è¦è®¤è¯ã€‚</li></ul><p id="20b3c2f2-6509-41b8-b5c2-395203e1641b" class="">
</p><div id="5ffa4433-dff4-4051-8d68-404c3180f53f" class="collection-content"><h4 class="collection-title">Copy of repo è®¿é—®è¯¦æƒ…</h4><table class="collection-content"><thead><tr><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.4);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesTitle"><path d="M7.73943662,8.6971831 C7.77640845,8.7834507 7.81338028,8.8943662 7.81338028,9.00528169 C7.81338028,9.49823944 7.40669014,9.89260563 6.91373239,9.89260563 C6.53169014,9.89260563 6.19894366,9.64612676 6.08802817,9.30105634 L5.75528169,8.33978873 L2.05809859,8.33978873 L1.72535211,9.30105634 C1.61443662,9.64612676 1.2693662,9.89260563 0.887323944,9.89260563 C0.394366197,9.89260563 0,9.49823944 0,9.00528169 C0,8.8943662 0.0246478873,8.7834507 0.0616197183,8.6971831 L2.46478873,2.48591549 C2.68661972,1.90669014 3.24119718,1.5 3.90669014,1.5 C4.55985915,1.5 5.12676056,1.90669014 5.34859155,2.48591549 L7.73943662,8.6971831 Z M2.60035211,6.82394366 L5.21302817,6.82394366 L3.90669014,3.10211268 L2.60035211,6.82394366 Z M11.3996479,3.70598592 C12.7552817,3.70598592 14,4.24823944 14,5.96126761 L14,9.07922535 C14,9.52288732 13.6549296,9.89260563 13.2112676,9.89260563 C12.8169014,9.89260563 12.471831,9.59683099 12.4225352,9.19014085 C12.028169,9.6584507 11.3257042,9.95422535 10.5492958,9.95422535 C9.60035211,9.95422535 8.47887324,9.31338028 8.47887324,7.98239437 C8.47887324,6.58978873 9.60035211,6.08450704 10.5492958,6.08450704 C11.3380282,6.08450704 12.040493,6.33098592 12.4348592,6.81161972 L12.4348592,5.98591549 C12.4348592,5.38204225 11.9172535,4.98767606 11.1285211,4.98767606 C10.6602113,4.98767606 10.2411972,5.11091549 9.80985915,5.38204225 C9.72359155,5.43133803 9.61267606,5.46830986 9.50176056,5.46830986 C9.18133803,5.46830986 8.91021127,5.1971831 8.91021127,4.86443662 C8.91021127,4.64260563 9.0334507,4.44542254 9.19366197,4.34683099 C9.87147887,3.90316901 10.6232394,3.70598592 11.3996479,3.70598592 Z M11.1778169,8.8943662 C11.6830986,8.8943662 12.1760563,8.72183099 12.4348592,8.37676056 L12.4348592,7.63732394 C12.1760563,7.29225352 11.6830986,7.11971831 11.1778169,7.11971831 C10.5616197,7.11971831 10.056338,7.45246479 10.056338,8.0193662 C10.056338,8.57394366 10.5616197,8.8943662 11.1778169,8.8943662 Z M0.65625,11.125 L13.34375,11.125 C13.7061869,11.125 14,11.4188131 14,11.78125 C14,12.1436869 13.7061869,12.4375 13.34375,12.4375 L0.65625,12.4375 C0.293813133,12.4375 4.43857149e-17,12.1436869 0,11.78125 C-4.43857149e-17,11.4188131 0.293813133,11.125 0.65625,11.125 Z"></path></svg></span>Repo</th><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.4);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesMultipleSelect"><path d="M4,3 C4,2.447715 4.447715,2 5,2 L12,2 C12.5523,2 13,2.447716 13,3 C13,3.55228 12.5523,4 12,4 L5,4 C4.447715,4 4,3.55228 4,3 Z M4,7 C4,6.447715 4.447715,6 5,6 L12,6 C12.5523,6 13,6.447716 13,7 C13,7.55228 12.5523,8 12,8 L5,8 C4.447715,8 4,7.55228 4,7 Z M4,11 C4,10.447715 4.447715,10 5,10 L12,10 C12.5523,10 13,10.447716 13,11 C13,11.55228 12.5523,12 12,12 L5,12 C4.447715,12 4,11.55228 4,11 Z M2,4 C1.44771525,4 1,3.55228475 1,3 C1,2.44771525 1.44771525,2 2,2 C2.55228475,2 3,2.44771525 3,3 C3,3.55228475 2.55228475,4 2,4 Z M2,8 C1.44771525,8 1,7.55228475 1,7 C1,6.44771525 1.44771525,6 2,6 C2.55228475,6 3,6.44771525 3,7 C3,7.55228475 2.55228475,8 2,8 Z M2,12 C1.44771525,12 1,11.5522847 1,11 C1,10.4477153 1.44771525,10 2,10 C2.55228475,10 3,10.4477153 3,11 C3,11.5522847 2.55228475,12 2,12 Z"></path></svg></span>è®¿é—®æƒé™</th><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.4);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesCheckbox"><path d="M0,3 C0,1.34314 1.34326,0 3,0 L11,0 C12.6567,0 14,1.34314 14,3 L14,11 C14,12.6569 12.6567,14 11,14 L3,14 C1.34326,14 0,12.6569 0,11 L0,3 Z M3,1.5 C2.17139,1.5 1.5,2.17157 1.5,3 L1.5,11 C1.5,11.8284 2.17139,12.5 3,12.5 L11,12.5 C11.8286,12.5 12.5,11.8284 12.5,11 L12.5,3 C12.5,2.17157 11.8286,1.5 11,1.5 L3,1.5 Z M2.83252,6.8161 L3.39893,6.27399 L3.57617,6.10425 L3.92334,5.77216 L4.26904,6.10559 L4.44531,6.27582 L5.58398,7.37402 L9.28271,3.81073 L9.45996,3.64008 L9.80664,3.3056 L10.1538,3.63989 L10.3311,3.81067 L10.8936,4.35303 L11.0708,4.52399 L11.4434,4.88379 L11.0708,5.24353 L10.8936,5.41437 L6.1084,10.0291 L5.93115,10.2 L5.58398,10.5344 L5.23682,10.2 L5.05957,10.0292 L2.83057,7.87946 L2.65283,7.70801 L2.27832,7.34674 L2.6543,6.98694 L2.83252,6.8161 Z"></path></svg></span>æ˜¯å¦éœ€è¦è®¤è¯</th></tr></thead><tbody><tr id="29280d88-3958-4e4e-97b0-5c05918f66a5"><td class="cell-title"><a href="https://www.notion.so/testing-29280d8839584e4e97b05c05918f66a5">testing</a></td><td class="cell-QYW?"><span class="selected-value select-value-color-gray">employee</span></td><td class="cell-XWq?"><div class="checkbox checkbox-off"></div></td></tr><tr id="36a0b239-b8f2-48b7-b3cb-414372e54fd5"><td class="cell-title"><a href="https://www.notion.so/unity-internal-36a0b239b8f248b7b3cb414372e54fd5">unity-internal</a></td><td class="cell-QYW?"><span class="selected-value select-value-color-gray">employee</span></td><td class="cell-XWq?"><div class="checkbox checkbox-off"></div></td></tr><tr id="f78084e7-a98f-4f29-a427-1e108f9967ee"><td class="cell-title"><a href="https://www.notion.so/public-f78084e7a98f4f29a4271e108f9967ee">public</a></td><td class="cell-QYW?"><span class="selected-value select-value-color-gray">employee</span><span class="selected-value select-value-color-purple">partner</span><span class="selected-value select-value-color-brown">source code customer</span></td><td class="cell-XWq?"><div class="checkbox checkbox-off"></div></td></tr><tr id="e450e2ee-f3b3-4b65-947f-7379964e0162"><td class="cell-title"><a href="https://www.notion.so/main-e450e2eef3b34b65947f7379964e0162">main</a></td><td class="cell-QYW?"><span class="selected-value select-value-color-gray">employee</span><span class="selected-value select-value-color-brown">source code customer</span></td><td class="cell-XWq?"><div class="checkbox checkbox-on"></div></td></tr><tr id="36c1c37e-99d4-483c-9928-03e2bf565162"><td class="cell-title"><a href="https://www.notion.so/console-36c1c37e99d4483c992803e2bf565162">*-console</a></td><td class="cell-QYW?"><span class="selected-value select-value-color-pink">customer approved by console owner</span><span class="selected-value select-value-color-gray">employee</span></td><td class="cell-XWq?"><div class="checkbox checkbox-on"></div></td></tr></tbody></table></div><p id="96d4a9de-f6d3-43b6-8f8f-812b34521d3a" class="">
</p><h2 id="1c8c7054-ab47-4492-a29e-187509eff472" class="">2ã€æ„å»º &amp; ä¸Šä¼  æ–°çš„Artifactsåˆ°Stevedore æµç¨‹</h2><h3 id="9957d72c-745f-43d8-bd42-fd9786eba356" class="">1ã€æ‰‹åŠ¨ä¸Šä¼ artifact</h3><p id="02c151a9-a4d4-4ac1-b71d-9a3109b1bf4f" class="">é¦–å…ˆä¸º artifact äº§ç”Ÿä¸€ä¸ª artifactIdï¼Œæ ¼å¼ä¸º <code>{filename}-{platform}-{architecture}/{version.number}_{file_hash}.zip(7z)</code> ã€‚</p><p id="ccc4920f-7f41-43b0-8bba-6f86ed130886" class="">å…¶ä¸­æ–‡ä»¶å“ˆå¸Œéƒ¨åˆ†ä½¿ç”¨çš„æ˜¯ sha256 ç®—æ³•ï¼Œå¯é€šè¿‡ä¸‹åˆ—æ–¹å¼ç”Ÿæˆï¼š<div class="indented"><p id="353dd0f7-9f34-4011-be73-2266370cbf91" class=""><strong>å…¶ä»–å¹³å°:</strong>    <mark class="highlight-gray">bee.exe steve new PATH ARTIFACT-NAME VERSION-STRING</mark>
<strong>Mac:</strong>           <mark class="highlight-gray">shasum -a 256 PATH</mark>
<strong>Linux :</strong>        <mark class="highlight-gray">sha256sum  PATH</mark>
<strong>Windows</strong>:  <mark class="highlight-gray">Get-FileHash -Algorithm SHA256 PATH</mark></p></div></p><p id="123005e9-bf3c-4087-bc5d-eb3f15bcd851" class="">ç„¶åæŒ‰ç…§ <a href="https://stevedore.unity3d.com/upload/">https://stevedore.unity3d.com/upload/</a> ä¸Šçš„è¯´æ˜å°†æ–‡ä»¶ä¸Šä¼ åˆ°â€œæµ‹è¯•â€å­˜å‚¨åº“ã€‚</p><figure id="d3297888-0c6c-4668-8586-de265e3c2193" class="image"><a href="index/man-upload.jpg"><img style="width:1594px" src="index/man-upload.jpg"/></a></figure><p id="bd4938a0-a31f-4306-9b41-8d8c499bfbf4" class="">å®Œæˆæµ‹è¯•ï¼Œè¯·åœ¨#devs-stevedore ä¸Šè¦æ±‚å°†artifact ä¸Šä¼ åˆ° Stevedore  prodå­˜å‚¨åº“ä¸Šï¼Œä¾‹å¦‚â€œpublicâ€æˆ– â€œunity-internalâ€ repoä¸‹ã€‚</p><p id="1be5b8c0-8fe0-40fd-9a99-482eb36dd39c" class="">
</p><h3 id="74032737-5562-48b9-adfa-a75c2aa172f5" class="">2ã€è‡ªåŠ¨åŒ–æ„å»ºä¸Šä¼ artifact</h3><p id="7785a35f-6cba-450c-b826-642b261eb5d3" class="">
</p><p id="27c56586-4e0f-4e05-8079-3edd2f8bdfe3" class=""><strong>é€šå¸¸ï¼Œä»æºä»£ç repoæ„å»ºçš„æ‰€æœ‰artifactséƒ½åº”ä½¿ç”¨æ„å»ºè‡ªåŠ¨åŒ–åˆ›å»ºï¼Œè€Œä¸æ˜¯æ‰‹åŠ¨åˆ›å»º, ä»¥é˜²æ­¢æ‰‹åŠ¨ä¿®æ”¹</strong></p><p id="7e89b4d9-1583-43eb-a0f2-5742e0651ed8" class="">
</p><p id="acbb9b98-9a9e-4764-a334-c348d90276ff" class="">(1)  åˆ›å»ºä¸€ä¸ªartifact. </p><pre id="55f35113-d8c6-4702-b12c-fbbb4b551ec2" class="code"><code>void SetupStevedoreArtifact(NativeProgramConfiguration config, CSharpProgram program)
{
    // é€‚ç”¨çš„å¹³å°/æ¶æ„, e.g. &quot;win-x86&quot; or &quot;linux-x64&quot;.
    var suffix = $&quot;{config.Platform.DisplayName.ToLower()}-{config.ToolChain.Architecture.DisplayName}&quot;;

    var artifactPath = new NPath($&quot;artifacts/for-stevedore/hello-{suffix}.7z&quot;);

    var contents = new ZipArchiveContents();
    // æ·»åŠ License
    contents.AddFileToArchive(&quot;LICENSE.md&quot;);
    // åˆ é™¤å½’æ¡£ä¸­çš„è·¯å¾„
    contents.AddFileToArchive(program.Path, program.Path.FileName);
    ZipTool.SetupPack(artifactPath, contents);
}</code></pre><p id="32638739-40a6-4fae-a1dd-49a4b8adac42" class="">
</p><p id="9dc345f3-dc6c-429c-b06f-d81617e41576" class="">(2) ç”Ÿæˆä¸Šä¼ å¯†é’¥.</p><p id="d4b80df4-90ac-4bd9-845d-b7733a3a4893" class="">è¦åœ¨æ„å»ºè‡ªåŠ¨åŒ–åä¸Šä¼ ï¼Œéœ€è¦ä¸€ä¸ªä¸Šä¼ å¯†é’¥ï¼ˆæ¨èä½¿ç”¨æ›´ç»†ç²’åº¦çš„å¯†é’¥, ä»¥æé«˜å®‰å…¨æ€§ï¼‰ã€‚
è¯¦ç»†è¯´æ˜è¯·<a href="https://stevedore.unity3d.com/upload/keys">ç‚¹å‡»æ­¤é“¾æ¥</a> </p><p id="8380d78a-6ab0-424d-a300-ce08fc36d9ce" class="">ä½¿ç”¨ artifactåç§° ä»¥åŠ ç”µå­é‚®ä»¶ç”Ÿæˆå¯†é’¥å¯¹.</p><p id="bea1287b-136c-46a6-9555-d80865539e66" class="">
</p><p id="6260b1ff-4f2e-4f29-b7b3-8c3b64993beb" class="">(3) é€‰æ‹©Katana | Yamato ä¸Šä¼ .</p><ul id="e703baa8-28f3-4b96-891a-0f09e81b97c8" class="bulleted-list"><li>Yamato</li></ul><p id="8369af75-6343-48d2-bc8f-9061028a257c" class="">æœ‰æ—¶å€™è®¿é—®é¡µé¢éœ€è¦è¿æ¥VPN</p><p id="8672506a-8af8-49fc-91ae-b247afe18abe" class="">æµç¨‹å¦‚ä¸‹:</p><figure id="7ad178e7-b5b6-40bd-93a1-6557b6ef2a3d" class="image"><a href="index/upload.png"><img style="width:2411px" src="index/upload.png"/></a></figure><p id="a1c8fa35-00dd-44de-8068-440192cd7166" class="">(1) åˆ›å»ºä¸€ä¸ªYamato project, </p><p id="f4d781d2-8754-4f14-9912-788455b726d6" class="">
</p><p id="2059f469-63b2-44ea-a7fc-02860f9e3010" class="">(2) åˆ›å»ºä¸€ä¸ªè·ŸprojectåŒåçš„Secret group;</p><figure id="ff86340d-242f-4277-9354-5eaffa5cc5c9" class="image"><a href="index/1.png"><img style="width:1494px" src="index/1.png"/></a></figure><p id="2beed101-c138-474b-9b84-2288f9456108" class="">
</p><p id="0c712577-47d1-4cfa-84dd-ebfcc8e4ae63" class="">(3) åœ¨projectè®¾ç½®é‡Œé¢æ·»åŠ ä¸Šä¸€æ­¥åˆ›å»ºçš„secret group, ä»¥åŠ<code>stevedore-upload</code>group. </p><figure id="0f3ee990-75ee-4ee3-b7df-532f19a0b54b" class="image"><a href="index/2.png"><img style="width:1656px" src="index/2.png"/></a></figure><p id="9adf9aa8-135b-4a9c-964f-c60735fad01b" class="">
</p><p id="f52dc5e3-2c1f-4944-8e86-ff4a605241d3" class="">æ·»åŠ stevedore-upload group éœ€è¦è¿›è¡Œå®¡æ ¸, å¯ä»¥åœ¨ <mark class="highlight-brown"><strong>#devs-stevedore </strong></mark>channel è¯·æ±‚æƒé™;</p><figure id="b757d858-2f47-468e-890a-ab9fdd0c5073" class="image"><a href="index/3.png"><img style="width:1570px" src="index/3.png"/></a></figure><p id="b5836409-2ae4-4559-9ed1-f8205c4ac52d" class="">
</p><p id="223dbd50-90fb-4614-8f49-5a851cb309e0" class="">(4) åœ¨é¡¹ç›®è·Ÿè·¯å¾„ä¸‹åˆ›å»ºä¸€ä¸ª<code>.yamato</code>æ–‡ä»¶å¤¹, å¹¶åˆ›å»ºä¸€ä¸ªymlè„šæœ¬.</p><pre id="5d72c9b3-cc45-4513-aeab-a977a9f2226c" class="code"><code>hello-cs2021:
  name: hello-cs2021
  agent: 
    type: Unity::VM
    image: slough-ops/win10-base:stable
    flavor: b1.medium

  commands:
    - curl.exe -sSo StevedoreUpload.exe &quot;%STEVEDORE_UPLOAD_TOOL_URL%&quot;
    - StevedoreUpload.exe --version-len=12 --repo=testing --version=&quot;%GIT_REVISION%&quot; artifacts/for-stevedore/*</code></pre><p id="1742a0f1-0483-464c-b315-2efd685b9f6a" class="">
</p><p id="0991bf67-71c2-4752-88ca-a374dc4c8cb8" class="">
</p><h3 id="3ee3c214-3770-4ee7-b344-1c406567d477" class="">3ã€å…³äºArtifactå–åçš„ä¸€äº›è¦æ±‚</h3><p id="5512834a-b329-46ae-a804-4a986c9c6bf3" class="">1ï¼‰ã€Artifact name</p><p id="dd3861f9-e260-479f-bc3a-ebbae803ad8e" class="">å¦‚æœä¸åŒå¹³å°éœ€è¦ä¸åŒç‰ˆæœ¬çš„artifactï¼Œè¯·ç¡®ä¿åŒ…å«å¹³å°/æ¶æ„åç¼€ã€‚ 
<code>ç¤ºä¾‹ï¼šemscripten-llvm-win-x64</code></p><p id="ed991919-58b3-4a17-8e3f-6848d5bafeeb" class="">âš ï¸   åç§°åªèƒ½åŒ…å« ASCII å­—æ¯ã€æ•°å­—ã€è¿å­—ç¬¦å’Œä¸‹åˆ’çº¿ï¼Œä¸”æœ€å¤š 28 ä¸ªå­—ç¬¦ï¼ˆWindows è·¯å¾„é•¿åº¦é—®é¢˜ï¼‰</p><p id="1b8abaee-db23-4ec0-9bc1-3fe08d1a271a" class="">
</p><p id="ae0b7c8c-8cd5-4df8-82ef-0738429aa0c7" class="">2ï¼‰ã€Artifact version</p><p id="e2dc82c0-8630-4e22-97de-08b30a39593a" class="">å¦‚æœæ˜¯ç¬¬ä¸‰æ–¹ä¸‹è½½, è¯·æŒ‰åŸæ ·ä½¿ç”¨ç‰ˆæœ¬å­—ç¬¦ä¸²ã€‚ </p><p id="acabb06d-87d1-4683-a20c-e977a4d2460f" class="">å¦‚æœè¯¥artifactæ˜¯ â€œè‡ªåˆ¶çš„â€ï¼Œæˆ–å·²ä¿®æ”¹è¿‡ç¬¬ä¸‰æ–¹èµ„æºï¼Œä¸è¦æŒ‰åŸæ ·ä½¿ç”¨ç‰ˆæœ¬å·ï¼Œè¯·æ·»åŠ è¯¸å¦‚åƒ-unityè¿™æ ·çš„åç¼€ã€‚
å¦‚æœartifactæ˜¯ä½¿ç”¨æ¥è‡ª Git æˆ– Hg å­˜å‚¨åº“çš„æ„å»ºè‡ªåŠ¨åŒ–ï¼ˆâ€œCIâ€ï¼‰æ„å»ºçš„ï¼Œç‰ˆæœ¬å­—ç¬¦ä¸²æœ€å¥½ç®€åŒ–ä¸º12 ä¸ªå­—ç¬¦çš„å“ˆå¸Œå€¼.</p><p id="8825ba2c-0cd9-47a8-89d2-a8b94a8b8959" class="">âš ï¸  åªèƒ½åŒ…å« ASCII å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦ -(),.=@[]_ï¼Œå¹¶ä¸”æœ€å¤š 40 ä¸ªå­—ç¬¦.</p><p id="9753db10-fe59-4302-8ae7-37ab62773157" class="">
</p><p id="dda82225-c95e-466c-abeb-f522282b6499" class="">3ï¼‰ã€Artifact content</p><ul id="cafdd786-a98b-4133-81d6-2c48473e587a" class="toggle"><li><details open=""><summary>æ ¹ç›®å½•ä¸‹å¿…é¡»åŒ…å«<code>LICENSE</code>æ–‡ä»¶</summary><p id="5400f45e-b7d9-4672-9f18-cb38f2083079" class="">unity-internal repoä¸‹çš„artifactså¯é…Œæƒ…å¿½ç•¥</p></details></li></ul><ul id="1b066fe6-a866-4bd5-91fd-5388c82f169c" class="toggle"><li><details open=""><summary>é¿å…artifactè·¯å¾„ä¸­å­˜åœ¨ç‰ˆæœ¬å·</summary></details></li></ul><ul id="14e067ad-5041-4372-9f3e-614e17bb1787" class="toggle"><li><details open=""><summary>å¹¶ä¸éœ€è¦é¢å¤–åˆ›å»ºä¸€ä¸ªæ ¹ç›®å½•</summary></details></li></ul><ul id="134ee9d6-2ac9-4e27-b478-136dc1183f72" class="toggle"><li><details open=""><summary>ä¸è¦åŒ…å«readme, æºç å·²ç»æµ‹è¯•ç”¨ä¾‹ä»£ç </summary></details></li></ul><p id="89091642-af54-4cd9-aa36-7496f750b187" class="">
</p><h2 id="5f9ba8fe-0d85-41d0-bc5e-e602e138f6d0" class="">3ã€Stevedoreåœ¨Unity buildç³»ç»Ÿä¸­çš„åº”ç”¨</h2><p id="1e014863-cd96-404a-8a5f-36876180e07f" class="">
</p><h3 id="80969452-cd30-434d-9e79-654ce06d56ef" class="">1ã€Stevedore.manifest</h3><p id="11e21ade-f2d5-46ea-b4bc-927ca26fdb8d" class="">
</p><p id="34cff587-086a-44db-8c80-fc983f44104b" class="">manifest æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡æœ¬æ–‡ä»¶ï¼ˆå¸¦æœ‰ .stevedore æ‰©å±•å) , å¯å‚è€ƒ<code>bee_bootstrap.manifest.stevedore</code>. æ¯è¡Œåˆ—å‡ºä¸€ä¸ªartifact IDï¼Œä»¥åŠå®ƒçš„å­˜å‚¨ä»“åº“åœ°å€, ä¾‹å¦‚:</p><pre id="08d5f0af-ded2-4959-ae81-ac1117784845" class="code"><code>public: 7za-win-x64/16.04-1.1.4_0d1e6ad367de3bb0c1a396856903c63e080a1e8fee52897cb5f5dee063832831.zip</code></pre><p id="ed787dc6-a432-4a09-a5bc-dd19ebf8cb7d" class="">manifestä¸­åˆ—å‡ºçš„å­˜å‚¨ä»“åº“åç§°å’Œatrifactç‰ˆæœ¬ä¼˜å…ˆäºæ„å»ºä»£ç ä¸­æŒ‡å®šçš„ä»»ä½•å†…å®¹ã€‚ ä¾‹å¦‚ å³ä½¿æ„å»ºä»£ç è¦æ±‚.</p><pre id="c0e7ad27-67b6-4525-8c89-8cf86dfd487a" class="code"><code>StevedoreArtifact.UnityInternal(&quot;7za-win-x64/18.01-1.4.7_abc...def.zip&quot;)</code></pre><p id="8fbe60bd-c710-4b63-a136-bc2ef25a6ae9" class="">Stevedore è¿˜æ˜¯å°†ä»publicå­˜å‚¨åº“ï¼ˆå¦‚æ¸…å•ä¸­æŒ‡å®šçš„ï¼‰è·å–ç‰ˆæœ¬ 16.04.</p><p id="c00c41b7-1e50-480f-b9b7-79868f28d95e" class="">å®˜æ–¹å»ºè®®ä½¿ç”¨manifestï¼Œå› ä¸ºæŸ¥çœ‹manifestæ–‡ä»¶, å°±å¯ä»¥è·å¾—æ‰€æœ‰ç”¨åˆ°çš„ Stevedore artifactsã€‚</p><p id="ce9bd8f0-a727-4d06-9c2a-6803e5226ed7" class="">ç”±äºmanifestæä¾›äº†artifactçš„å­˜å‚¨åº“åç§°å’Œç‰ˆæœ¬ï¼Œä¸‹è½½å…¶ä»£ç å¯ä»¥ç®€åŒ–ä¸ºï¼š</p><pre id="2da84e71-41a0-4eb5-bbe0-aef63b8dd31b" class="code"><code>new StevedoreArtifact(&quot;7za-win-x64&quot;)</code></pre><figure id="22f5b493-5cfc-4a47-bf7c-019412afd852" class="image"><a href="index/4.jpg"><img style="width:1754px" src="index/4.jpg"/></a></figure><p id="00320516-64d4-466b-8a6b-d42abe17c533" class="">
</p><h3 id="9a11a604-bfd4-4844-a20d-af26320b5880" class="">2ã€ä¸‹è½½åŠä½¿ç”¨å·²ä¸‹è½½çš„Artifacts</h3><p id="c694b69c-369f-478b-8e80-0a73b199a8fa" class="">
</p><p id="1f363b4e-a668-40b4-8166-58f1999e7b29" class="">ArtifactId å¯é€šè¿‡<a href="https://stevedore.unity3d.com/list/">åˆ—è¡¨</a>æŸ¥è¯¢</p><p id="efee625d-d164-42b0-8c24-944ebd3ed9bb" class="">åœ¨ä½¿ç”¨è¯¥å‡½æ•°ä¸‹è½½æ–‡ä»¶æ—¶, ä¼šçœ‹åˆ°è¯¥artifactçš„è·¯å¾„æ˜¾ç¤ºä¸º <code>/VirtualStevedoreRoot/public/ArtifactId</code>, æ˜¾ç¤ºçš„ä¸ºè™šæ‹Ÿè·¯å¾„. åªè¦åœ¨å¯¹å…¶è·¯å¾„è°ƒç”¨ ResolveWithFileSystem() æˆ–è€… InQuotesResolved() æ‰ä¼šçœŸæ­£æ‰§è¡Œä¸‹è½½è§£å‹. è¿™æ­£æ˜¯ä¹‹å‰æåˆ°çš„ IBackendRegistrable() ç±»ä¸å†éœ€è¦çš„åŸå› , æ–‡ä»¶æ˜¯è‡ªåŠ¨è§£æçš„.</p><pre id="30d78978-1873-4b7d-b63f-acc8bae655d7" class="code"><code>// download &amp; unpack
var artifact = StevedoreArtifact.Public(string ArtifactId);
// This allows the SteveVirtualFileSystem to setup the unpacks
artifact.Path.ResolveWithFileSystem();</code></pre><figure id="d5024c60-6516-4fc6-8509-8ca7697c6f4c" class="image"><a href="index/1%201.png"><img style="width:1668px" src="index/1%201.png"/></a></figure><p id="c3f6e965-95a5-4dde-bb42-1bf74a0dce92" class="">
</p><p id="c1306aca-1683-4c28-bf01-b03d1d277fed" class="">
</p><h3 id="40552d23-a5e2-4b09-bf12-768882f271d2" class="">3ã€Artifactsæœ¬åœ°ç‰ˆæœ¬ç®¡ç†å’Œæ›´æ–°</h3><p id="6172d749-6812-440b-8d33-30192d6346cc" class="">
</p><p id="d6c9fc0c-dca7-43c5-9200-89cad5fd1468" class="">åœ¨æˆåŠŸä¸‹è½½è§£å‹artifactå, ä¼šåœ¨è¯¥ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª<code>.StevedoreVersion</code>æ–‡ä»¶, åŒ…å«å½“å‰artifactçš„repo åŠ id. </p><p id="8bbfd495-ff11-434a-8abd-3e379b7b5a54" class="">
</p><p id="f1218d06-cb40-469d-9410-4bcd21ed8eaf" class="">å‚è€ƒé“¾æ¥</p><ul id="9679634f-3270-4b6a-84f3-87200a7b9703" class="bulleted-list"><li> <a href="https://github.cds.internal.unity3d.com/unity/repack-visual-studio">https://github.cds.internal.unity3d.com/unity/repack-visual-studio</a></li></ul><p id="cb3b5972-cfbc-46ed-a275-c06db7865f5c" class="">
</p><p id="e1bf4f74-d9ee-4816-960b-e4e91a696d3c" class="">Demo code</p><ul id="a5ec0fdd-2092-4d8a-943d-c03c194188ca" class="bulleted-list"><li><a href="https://github.cds.internal.unity3d.com/yuting-chen/learning-bee/tree/main/01_CompileCSharp">https://github.cds.internal.unity3d.com/yuting-chen/learning-bee/tree/main/01_CompileCSharp</a></li></ul><h1 id="8bf0f9b1-32f7-4955-a8bb-0cfbb23d99ba" class="">å…­ã€Stevedoreåœ¨Beeä¸­å¦‚ä½•è¢«æ•´åˆçš„</h1><p id="86e1ee6c-6883-4a9c-95ab-a648afcc8318" class="">
</p><p id="0153324e-bde2-47af-a1a2-29953fc9f9f6" class="">stevedore  éƒ¨åˆ†ä»£ç ä¸»è¦æ˜¯åœ¨ ä»¥ä¸‹ä¸¤ä¸ªé‡Œé¢</p><ul id="f5a9ef48-9089-405d-b58b-25939f8efdf0" class="bulleted-list"><li>Bee.Core.Stevedore</li></ul><ul id="2042f694-fead-4b91-a92c-68f2a219e0c4" class="bulleted-list"><li>Bee.Stevedore.Program</li></ul><p id="dcd9d1e5-a68d-435a-b92a-ec845027fbc8" class="">
</p><p id="6200953c-438a-4762-8507-2d7f82531832" class="">è¿™è¾¹è®²ç²—ç•¥çš„ä»‹ç»ç»™å„è‡ªé‡Œé¢æœ‰å“ªäº›åŠŸèƒ½æ–¹æ³•ï¼Œç„¶åç€é‡ä»‹ç»ä¸‹ä¸Šé¢å‡ºç°çš„å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„æ¦‚å¿µã€‚</p><p id="adca88af-db5a-4a17-a907-db4f846ed7ba" class="">
</p><h3 id="e12f2ea1-5ad3-4d40-974b-c948fa8af458" class="">1ã€Bee.Core.Stevedore</h3><p id="2f2702d2-ce6e-42da-913a-8694ee57419b" class="">ä»£ç ä¸‹æ–‡ä»¶åˆ—è¡¨å¦‚ä¸‹ï¼š</p><figure id="f7eccfc2-5b5d-4023-a34f-09ae03d1e753" class="image"><a href="index/Untitled%2011.png"><img style="width:410px" src="index/Untitled%2011.png"/></a></figure><p id="5a350a46-e905-4de8-a1b5-0206b0e2cef9" class="">
</p><p id="9fb65927-b91f-4188-a475-1718dbac74e3" class="">
</p><figure id="ed87ae54-791e-453a-b20c-7c1a462a30dd" class="image"><a href="index/3d38d650441c48e7c2aa8c90972fa35.png"><img style="width:949px" src="index/3d38d650441c48e7c2aa8c90972fa35.png"/></a></figure><p id="c5ca99a1-4aa8-42ef-a204-4ed6fd6d7585" class="">è¯¥åŒ…ä¸­çš„å†…å®¹ç”¨æ¥åœ¨æ„å»ºä»£ç è¿‡ç¨‹ä¸­å¤„ç†Stevedore artifactsçš„apiã€‚å…¶ä¸­æœ€é‡è¦çš„æ˜¯ä¸‹é¢è¿™ä¸¤ä¸ªclassï¼Œå…¶ä»–çš„åŸºæœ¬éƒ½æ˜¯ä¸ºå®ƒä»¬æœåŠ¡çš„</p><ol type="1" id="6265c020-24ff-491f-9e03-293d7f4cbf35" class="numbered-list" start="1"><li>StevedoreArtifactï¼šè¡¨ç¤ºä¸€ä¸ªÂ StevedoreÂ åŒ…ï¼Œå…¶ä¸­åŒ…å«ç”¨äºæ„é€ å·¥ä»¶ã€ç¡®å®šå…¶è§£åŒ…ä½ç½®ã€è·å–å…¶æ–‡ä»¶åˆ—è¡¨ç­‰çš„æ–¹æ³•ï¼ˆä¸Â UnityÂ æ„å»ºç³»ç»Ÿçš„BuildZipArtifactç±»ç›¸å½“ï¼‰ã€‚</li></ol><ol type="1" id="6f16d728-623a-44c3-8fe8-e69248981918" class="numbered-list" start="2"><li>StevedoreSettingsï¼šÂ å®šä¹‰StevedoreArtifactç‰¹å®šäºåç«¯çš„ç›¸å…³è®¾ç½®ã€‚</li></ol><p id="8a959f2e-3ed1-431d-baeb-3aa545a30d25" class="">
</p><p id="a02e1437-a537-4fde-8671-f9a1c238d304" class="">
</p><p id="03386e18-97ed-4ae1-9120-711f50433b62" class="">å…ˆè®²ä¸€äº›å…¶ä»–çš„classï¼š</p><ol type="1" id="14232345-8298-4e20-be86-c7e02de4154c" class="numbered-list" start="1"><li>class SteveVirtualFileSystem <p id="6ceb915c-88e7-4dba-824e-27ae41cc7295" class="">SteveVirtualFileSystem è´Ÿè´£æ£€æµ‹è™šæ‹Ÿè·¯å¾„ï¼Œæ˜¯åœ¨StevedoreArtifactä¸­ä½¿ç”¨çš„ï¼Œåœ¨StevedoreArtifactä¸­çš„ç”¨æ³•ä¸»è¦ç”±ä¸‰ä¸ªï¼š</p><p id="cb856522-3bb5-4819-a9d9-de06411ef0c4" class="">ï¼ˆ1ï¼‰æ ¹æ®å½“å‰æ´»åŠ¨çš„æ¸…å•è§£æÂ StevedoreArtifactã€‚</p><p id="93b02102-1bdd-48f3-8832-6d6d8d0f454e" class="">ï¼ˆ2ï¼‰ç¡®ä¿åœ¨åç«¯è®¾ç½®äº†Â steveÂ unpackÂ æ“ä½œï¼Œè¯¥æ“ä½œè´Ÿè´£å°†å·²è§£æçš„åŒ…è§£å‹åˆ°çœŸå®çš„æ–‡ä»¶ç³»ç»Ÿç›®å½•ä¸­ã€‚</p><p id="00918bff-7025-41b7-a554-c8ddc8b86d47" class="">ï¼ˆ3ï¼‰ç¡®ä¿çœŸæ­£çš„æ–‡ä»¶ç³»ç»Ÿç›®å½•ï¼ˆè§£æè·¯å¾„ï¼‰åœ¨Â tundra.dag.jsonÂ ä¸­ç»“æŸã€‚</p></li></ol><ol type="1" id="485d2f6a-25b6-40e7-ba96-281dc78b79db" class="numbered-list" start="2"><li>class StevedoreUnpacker<p id="07a86be2-7f78-4018-a6ed-b640aee1609f" class="">StevedoreUnpackerå¯éªŒè¯å·¥ä»¶æ˜¯å¦å¯ç”¨ï¼Œè¯»å–artifactæ–‡ä»¶åˆ—è¡¨ï¼Œå®‰è£…ï¼Œæ‹†åŒ…ç­‰ã€‚</p><ul id="307bb603-4ea6-4e85-80d0-593baef522c3" class="bulleted-list"><li>internal StevedoreUnpacker(Backend backend)ï¼ˆè®¾ç½®åç«¯ï¼Œè¯»å–ç¯å¢ƒé»˜è®¤å€¼ã€‚åˆ›å»ºDownloadCacheï¼‰</li></ul><ul id="40129620-15fc-4a2c-9c13-a6f6669c9694" class="bulleted-list"><li>void VerifyRepositoryForArtifactIsAvailable(ResolvedStevedoreArtifact artifact)ï¼ˆéªŒè¯ RepoName æ˜¯å¦æŒ‡å®šäº†å®é™…é…ç½®çš„å­˜å‚¨åº“ï¼ŒéªŒè¯å­˜å‚¨åº“å®é™…ä¸Šæ˜¯å¦å¯ç”¨ï¼Œå¦‚æœå·¥ä»¶å·²ç»ç¼“å­˜æ˜¯å¾ˆå¥½çš„ï¼‰</li></ul><ul id="8e0affe3-0e08-45ed-afd9-528aec2c9120" class="bulleted-list"><li>public NPath[] ReadFileListFor(StevedoreArtifact artifact)ï¼ˆè¯»å–æ–‡ä»¶åˆ—è¡¨ï¼‰</li></ul><ul id="cba6a438-475d-439d-8575-e5ab7fd12ad6" class="bulleted-list"><li>void SetupUnpack(ResolvedStevedoreArtifact resolvedArtifact, NPath resolvedTargetDir, NPath resolvedArtifactVersionFile)ï¼ˆå®‰è£…ï¼Œæ‹†åŒ…ï¼‰</li></ul></li></ol><p id="a3aef53c-099a-489c-8eaf-41939f585489" class="">å†è®²ä¸€ä¸‹StevedoreArtifactå’ŒStevedoreSettingsï¼š</p><ol type="1" id="d77daeae-4dea-46c9-9a53-92713eac5671" class="numbered-list" start="3"><li>class StevedoreArtifact<ul id="f582ca1d-3108-4be3-9936-63f99378bf17" class="bulleted-list"><li>public static StevedoreArtifact Public(string artifactId) ï¼ˆåˆ›å»ºä¸€ä¸ªæºè‡ªâ€œPublicâ€Stevedore å­˜å‚¨åº“çš„ StevedoreArtifactï¼‰</li></ul><ul id="0439a3f1-00b1-426b-af84-354fd925edb7" class="bulleted-list"><li>public static StevedoreArtifact Testing(string artifactId)ï¼ˆåˆ›å»ºä¸€ä¸ªæºè‡ªâ€œTestingâ€Stevedore å­˜å‚¨åº“çš„ StevedoreArtifactï¼‰</li></ul><ul id="cc670bd5-9ea8-48a7-8eab-425ca070d303" class="bulleted-list"><li>public static StevedoreArtifact UnityInternal(string artifactId)ï¼ˆåˆ›å»ºä¸€ä¸ªæºè‡ªâ€œUnityInternalâ€Stevedore å­˜å‚¨åº“çš„ StevedoreArtifactï¼‰</li></ul><ul id="c8047f50-3c7f-456b-9d6f-d5e3d27f54db" class="bulleted-list"><li>public static StevedoreArtifact FromLocalFile(string artifactName, NPath source)ï¼ˆåˆ›å»ºä¸€ä¸ªå·²ç»å­˜åœ¨äºæœ¬åœ°å­˜å‚¨åº“ä¸­çš„ StevedoreArtifactï¼Œå› æ­¤ä¸ç”¨ä¸‹è½½ã€‚ ä»…æ‰“ç®—ä½œä¸ºä¸€ç§è¿‡æ¸¡æªæ–½ï¼Œå…è®¸å°† Stevedore API ç”¨äºç°æœ‰çš„å¤§æ–‡ä»¶ï¼Œç›´åˆ°å®ƒä»¬è¢«ç§»åŠ¨åˆ°é€‚å½“çš„ Stevedore æœåŠ¡å™¨ã€‚ï¼‰</li></ul><ul id="a0f78970-c20f-4f14-b30a-543a8dffa14f" class="bulleted-list"><li>public bool IsByNameOnlyï¼ˆStevedoreArtifacts å¯ä»¥ä»…æŒ‰åç§°åˆ›å»ºï¼Œä¹Ÿå¯ä»¥æŒ‰ç‰¹å®šçš„å­˜å‚¨åº“ã€åç§°å’Œç‰ˆæœ¬åˆ›å»ºã€‚ IsByName è®©æ‚¨çŸ¥é“ä½¿ç”¨äº†å“ªä¸ªã€‚ï¼‰</li></ul><ul id="70b9d91f-a85b-4a24-9bac-cfee34ef0661" class="bulleted-list"><li>public RepoName RepoNameï¼ˆæ­¤ StevedoreArtifact çš„ RepoNameã€‚ å¦‚æœæ‚¨ç¡®å®šæ­¤ StevedoreArtifact æ˜¯ä½¿ç”¨ RepoName åˆ›å»ºçš„ï¼Œåˆ™ä»…æŸ¥è¯¢æ­¤å±æ€§ã€‚ï¼‰</li></ul><ul id="49c6b767-a71d-46a6-a839-c399b14acd5d" class="bulleted-list"><li>public ArtifactId ArtifactIdï¼ˆæ­¤ StevedoreArtifact çš„ ArtifactIdã€‚ å¦‚æœæ‚¨ç¡®å®šæ­¤ StevedoreArtifact æ˜¯ä½¿ç”¨ ArtifactId åˆ›å»ºçš„ï¼Œåˆ™ä»…æŸ¥è¯¢æ­¤å±æ€§ã€‚ï¼‰</li></ul><ul id="0426357c-e236-4179-ae9a-6cffe0c7b8d4" class="bulleted-list"><li>public NPath Pathï¼ˆè¿”å›è¡¨ç¤ºæ­¤stevedore artifactçš„è™šæ‹Ÿè·¯å¾„ã€‚ åƒ /VirtualStevedoreRoot/public/roslyn-csc-win64/... å¹¶ä¸”å¯ä»¥é€šè¿‡ NPath å’Œ Backend.Current å®‰å…¨ä½¿ç”¨ï¼‰</li></ul><ul id="7c3b6307-46ab-4f92-acf6-dd2bb0e4f9d2" class="bulleted-list"><li>public string VersionStringï¼ˆartifactç‰ˆæœ¬çš„â€œç‰ˆæœ¬å­—ç¬¦ä¸²â€éƒ¨åˆ†ã€å³ä¸åŒ…æ‹¬å“ˆå¸Œå’Œæ–‡ä»¶æ‰©å±•åã€‘ï¼Œç»™å®šä¸€ä¸ªartifact IDï¼Œå¦‚â€œmyartifact/1.0.1_26ab72615c65d7e857f.7zâ€ï¼Œè¿”å›â€œ1.0.1â€ï¼‰</li></ul><ul id="3a6a9200-6c97-45ce-8adb-a3e6ecbc34af" class="bulleted-list"><li>public StevedoreArtifact(RepoName repoName, ArtifactId id)(ä½¿ç”¨æŒ‡å®šçš„reponameå’Œartifact ID åˆ›å»ºä¸€ä¸ª StevedoreArtifactã€‚æ¸…å•æ–‡ä»¶ï¼ˆå¦‚æœä½¿ç”¨ï¼‰å¯èƒ½ä¼šè¦†ç›–å­˜å‚¨åº“å’Œå·¥ä»¶ç‰ˆæœ¬)</li></ul><ul id="b941d8e2-9d66-495d-b60e-a37b728d071a" class="bulleted-list"><li>public StevedoreArtifact(ArtifactName name)(é€šè¿‡åœ¨æ¸…å•æ–‡ä»¶ä¸­æŸ¥æ‰¾ç»™å®šåç§°æ¥åˆ›å»º StevedoreArtifact)</li></ul><ul id="2bac2ba6-f699-42e5-820c-1ddc3d682345" class="bulleted-list"><li>public (NPath resolvedTargetDir, NPath resolvedArtifactVersionFile) EnsureSetupUnpack()(ç¡®ä¿æ­¤ StevedoreArtifact å·²åœ¨å½“å‰åç«¯è§£åŒ…ã€‚ æ­¤æ–¹æ³•åœ¨æµ‹è¯•ä¸­å¾ˆæœ‰ç”¨ï¼Œæ­£å¸¸ä½¿ç”¨æ—¶ä¸éœ€è¦)</li></ul><ul id="00f1056b-35d0-4bef-a630-a527a2507a44" class="bulleted-list"><li>public NPath UnpackToUnusualLocation(æ³¨å†Œartifactï¼ˆä½¿ç”¨ Backend.Currentï¼‰ä»¥ç›´æ¥è§£å‹åˆ°â€œbuildâ€æˆ–â€œartifactsâ€æ–‡ä»¶å¤¹ä¸­çš„è‡ªå®šä¹‰ä½ç½®ã€‚è¿”å›å…¶ä»–æ„å»ºæ“ä½œå¯ä»¥ä½œä¸ºè¾“å…¥å¼•ç”¨çš„ç‰ˆæœ¬æ–‡ä»¶çš„è·¯å¾„ï¼Œè€Œä¸æ˜¯å•ä¸ªå·¥ä»¶æ–‡ä»¶)</li></ul><ul id="116d3b1c-3092-479c-a71a-20192f15763e" class="bulleted-list"><li>public NPath[] GetFileList()<p id="01b61bf4-e480-4e68-9835-36904385be42" class="">æ£€ç´¢æ­¤artifactä¸­æ‰€æœ‰æ–‡ä»¶çš„åˆ—è¡¨ã€‚è¯·æ³¨æ„æ­¤æ ¸å¿ƒÂ StevedoreÂ ç³»ç»Ÿæ‰©å±•çš„ä¸€äº›é—®é¢˜ï¼š</p><p id="9805a7b3-1833-4171-9ce0-43ce2f6512ef" class="">(1).Â å¦‚æœæ–‡ä»¶åˆ—è¡¨å°šæœªç¼“å­˜ï¼Œå®ƒå°†åœ¨å‰ç«¯ä¸‹è½½ï¼Œè¿™åœ¨å•ä¸ªçº¿ç¨‹ä¸ŠåŒæ­¥å‘ç”Ÿï¼ˆå°±åƒå‰ç«¯ä¸­çš„æ‰€æœ‰å†…å®¹ä¸€æ ·ï¼‰ã€‚å› æ­¤ï¼Œåœ¨è¾ƒå·®çš„ç½‘ç»œæ¡ä»¶ä¸‹ï¼ˆæœ€åæƒ…å†µä¸‹æ¯ä¸ªæ–‡ä»¶åˆ—è¡¨Â 10Â ç§’ï¼‰ï¼Œä½¿ç”¨å¤§é‡æ–‡ä»¶åˆ—è¡¨ä¼šå¯¹æ€§èƒ½äº§ç”Ÿé‡å¤§å½±å“ã€‚</p><p id="784dd54f-c016-4e94-9c9c-ec17c9326927" class="">(2).Â è¿™äº›å‰ç«¯ä¸‹è½½åœ¨æŸäº›Â .NETÂ è¿è¡Œæ—¶å’Œæ“ä½œç³»ç»Ÿç»„åˆä¸Šå¯èƒ½ä¼šé‡åˆ°Â SSLÂ è¯ä¹¦é—®é¢˜ï¼ˆåç«¯ä¸­çš„å¸¸è§„ä¸‹è½½ä¸ä¼šå‡ºç°è¿™äº›é—®é¢˜ï¼‰ã€‚</p><p id="6ba93c72-b30c-4598-9cad-9e7b3c44c077" class="">(3).Â å‰ç«¯çš„é”™è¯¯å¤„ç†ä¸å¤Ÿå®Œå–„ï¼Œå¹¶ä¸”æ²¡æœ‰é¥æµ‹æ•°æ®ï¼Œè¿™å¯èƒ½ä¼šä½¿æ•…éšœæ’é™¤æ›´åŠ å›°éš¾ã€‚</p><p id="8f368dd1-014e-44ec-8221-f8f41bd40775" class="">(4).Â &#x27;.filelist&#x27;Â artifactsæ²¡æœ‰æ ¡éªŒå’Œï¼Œå› æ­¤ä¼šå¢åŠ ç£ç›˜æˆ–ä¼ è¾“ä¸­æ–‡ä»¶æŸåçš„é£é™©ã€‚</p><p id="ffaf74b4-3442-4c92-bb60-6a995fbdce14" class="">è¿”å›artifactä¸­æ‰€æœ‰æ–‡ä»¶è·¯å¾„çš„åˆ—è¡¨ã€‚è·¯å¾„åŒ…æ‹¬å®Œæ•´çš„åŸºæœ¬è·¯å¾„ï¼Œå› æ­¤æ‚¨å¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒä»¬ã€‚</p><p id="40554d23-96af-46db-9d45-2cea4b585bde" class="">
</p></li></ul></li></ol><p id="116c6364-cd60-45cf-a18e-a7c67e42c549" class="">  4. class StevedoreSettings<div class="indented"><p id="f7a7a315-84df-4f70-a9ff-db92f55d0f5d" class="">å½±å“ä¸ºç‰¹å®šåç«¯(Backend.Current å½“å‰TundraBackendçš„Steve.Settings)åˆ›å»º StevedoreArtifacts çš„è®¾ç½®ã€‚ å¯ä»¥å°†æ–°çš„è®¾ç½®å®ä¾‹åˆ†é…ç»™ Backend.Current.Steve.Settingsã€‚</p><ul id="21fe82a0-23ef-4ec5-a7e2-5a22b710b5fc" class="bulleted-list"><li>static string MakeDefaultSteveInvocation(NPath relativeTo)ï¼ˆé€šè¿‡ç¯å¢ƒå˜é‡BEE_DOTNET_MUXERå’ŒBEE_DOTNET_NET5WRAPPERï¼ŒçŸ¥é“bee ç‹¬ç«‹é©±åŠ¨ç¨‹åºæ­£åœ¨ .net5 è¿è¡Œæ—¶ä¸Šè¿è¡Œï¼Œä¸”å¯ä»¥çŸ¥é“æ˜¯å“ªä¸€ä¸ªã€‚ è®©æˆ‘ä»¬é€šè¿‡ dotnet è¿è¡Œæ—¶å’Œæˆ‘ä»¬çš„ net5 wrapperè¿è¡Œæ‰€æœ‰steveè°ƒç”¨ï¼‰</li></ul><ul id="9da129a2-24af-44e6-a6e7-8a2defbce347" class="bulleted-list"><li>public bool EnforceManifestï¼ˆæ˜¯å¦æ‹’ç»ä¸‹è½½æ¸…å•ä¸­æœªåˆ—å‡ºçš„å·¥ä»¶ï¼‰</li></ul><ul id="98261677-6fab-4d2a-a53e-e8ad0261f528" class="bulleted-list"><li>public StevedoreSettings()ï¼ˆSteveè°ƒç”¨ï¼‰</li></ul></div></p><p id="e57a84f1-1fe4-45f8-b581-889702b5193f" class="">é™„å½•ï¼š</p><p id="67c860e5-3a94-4c61-82d9-cfe0a8289a59" class="">å¯ä»¥åœ¨è¿™é‡Œæµè§ˆç°æœ‰å·¥ä»¶ï¼Œå…·ä½“æµè§ˆä½ç½®å–å†³äºä»–ä»¬æ‰€å±çš„å­˜å‚¨åº“</p><ul id="e0cdb9b6-881c-4e75-ad2c-9bc0bfd655cf" class="bulleted-list"><li>public (<a href="https://stevedore.unity3d.com/list/">https://stevedore.unity3d.com/list/</a>)</li></ul><ul id="475547c3-1df0-401f-82a8-3b05ad972869" class="bulleted-list"><li>unity-internal(<a href="https://artifactory.prd.it.unity3d.com/ui/repos/tree/General/stevedore-unity-internal">https://artifactory.prd.it.unity3d.com/ui/repos/tree/General/stevedore-unity-internal</a>)</li></ul><ul id="95948ef6-347b-46fd-923c-c7391491bef5" class="bulleted-list"><li>testing (<a href="https://artifactory.prd.it.unity3d.com/ui/repos/tree/General/stevedore-testing">https://artifactory.prd.it.unity3d.com/ui/repos/tree/General/stevedore-testing</a>)</li></ul><p id="01ce0b6b-483f-4bf3-a436-4440c5e608fc" class="">
</p><figure id="d5202f29-4c95-4ed2-bb6e-40f8a8b83790" class="image"><a href="index/WXWorkCapture_16300455065554.png"><img style="width:1783px" src="index/WXWorkCapture_16300455065554.png"/></a></figure><p id="923484e0-5c1d-4ab0-86cf-f8ee589ae2b1" class="">
</p><p id="b9d90068-345e-4a50-981f-b111b730eff6" class="">é¡¾åæ€ä¹‰ï¼Œtestingå­˜å‚¨åº“ä»…ç”¨äºæµ‹è¯•ï¼›åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨å·¥ä»¶ä¹‹å‰ï¼Œå¿…é¡»å°†å®ƒä»¬æå‡åˆ°ç”Ÿäº§å­˜å‚¨åº“ä¹‹ä¸€ã€‚è¦æ±‚#devs-stevedoreÂ promotedå·¥ä»¶ã€‚</p><p id="16102033-1643-4fce-a2cc-da0042739e56" class="">æ‰€æœ‰å‘˜å·¥éƒ½å¯ä»¥ä¸Šä¼ åˆ°testingï¼Œå¹¶ä¸”å­˜å‚¨åº“ï¼ˆæŒ‰ç…§è®¾è®¡ï¼‰å……æ»¡äº†å®éªŒæ€§å’ŒæŸåçš„å·¥ä»¶ã€‚ä½œä¸ºä¸€èˆ¬è§„åˆ™ï¼Œæ‚¨å¯èƒ½åº”è¯¥é¿å…ä½¿ç”¨å…¶ä»–äººçš„testingå·¥ä»¶Â -Â æˆ–è€…è‡³å°‘åœ¨ä½¿ç”¨ä¹‹å‰è¯¢é—®ã€‚æ‚¨å¯ä»¥çœ‹åˆ°è°åœ¨Â ArtifactoryÂ ä¸Šä¸Šä¼ äº†ç»™å®šçš„å·¥ä»¶ï¼ˆä¸Šé¢çš„é“¾æ¥ï¼‰</p><p id="d2ddce95-1ae1-4b2a-b985-8686ce0af2ff" class="">
</p><h3 id="39137f7a-29f7-4121-a7fa-19a5348e4b73" class="">2ã€Bee.Stevedore.Program</h3><p id="6df258c8-9ae0-4b6b-8f2a-886b34ccb0e2" class="">
</p><p id="6c06ee81-ec85-4152-9edd-8f06ddbb0bf9" class="">ä»£ç ä¸‹æ–‡ä»¶åˆ—è¡¨å¦‚ä¸‹ï¼š</p><figure id="45c5fc7e-406c-4aa1-8572-9c67c94a77fd" class="image"><a href="index/Untitled%2012.png"><img style="width:342px" src="index/Untitled%2012.png"/></a></figure><p id="7ef90c96-617b-4002-9fe4-ee87a9d9d178" class="">
</p><p id="8d35a6ea-b783-4c72-8b3e-cad9a21bb394" class="">
</p><p id="a405a828-bd9f-496b-a13e-ce51bd0071b2" class="">ä¸»è¦å°±æ˜¯æä¾›ä¸€äº›å¸¸ç”¨æ–¹æ³•ï¼š</p><p id="1c7b72c9-db2e-4a4a-9fb2-6ae67ab1fc9a" class="">å…³äºArtifact æ ¡éªŒè§„åˆ™ï¼Œconfigå¯¹è±¡çš„è½¬æ¢ï¼Œä¸‹è½½ç¼“å­˜ï¼Œä¸‹è½½å™¨ï¼Œhttpä»£ç†åŠé”™è¯¯æç¤ºï¼Œ sslé”™è¯¯æç¤ºï¼Œunpackå‘½ä»¤ï¼Œenvè®¾ç½® ç­‰ï¼Œè¿™è¾¹ç€é‡è§£é‡Šä¸‹ä¸€éƒ¨åˆ†ã€‚</p><p id="0680c4f3-12e2-426a-bb34-88cda58a1802" class="">
</p><ul id="c31037ad-74a5-4230-8729-fb26d60e294e" class="bulleted-list"><li>ArtifactId.cs</li></ul><p id="455d43aa-75a8-4b5e-96c6-61ce01c8bc45" class="">
</p><pre id="2e7104d4-ae7b-4b5c-9507-97fd52878eb6" class="code"><code>     /// &lt;summary&gt;
    /// A valid and parsed Stevedore artifact ID.
    /// &lt;/summary&gt;
    public struct ArtifactId
    {
        internal const int MaxLength = ArtifactName.MaxLength + 1 + ArtifactVersion.MaxLength;

        public ArtifactName Name;
        public ArtifactVersion Version;

        public ArtifactId(string value)
        {
            var split = value.Split(new[] { &#x27;/&#x27; }, 3);
            if (split.Length != 2)
                throw new InvalidNameException(value, &quot;artifact ID&quot;, &quot;expected name and version, separated by &#x27;/&#x27;&quot;);

            Name = new ArtifactName(split[0]);
            Version = new ArtifactVersion(split[1]);
        }

        public override string ToString() =&gt; Name + &#x27;/&#x27; + Version;
    }</code></pre><p id="d796e579-c537-4022-b3d5-6af6d1798ca3" class="">
</p><p id="c5e2cda7-c416-472d-858f-a1adb9a5279e" class="">æ ¹æ®ArtifactName.MaxLength ï¼ŒArtifactVersion.MaxLength æˆ‘ä»¬æœç´¢ç›¸å…³ä»£ç ï¼Œå¾—åˆ°ä»¥ä¸‹çš„ä¸€äº›é•¿åº¦ä¿¡æ¯</p><p id="a070ada9-fb1c-40fe-a7fc-589c2bb03ce1" class="">
</p><pre id="58364f62-2425-486d-82d1-41e37ad51a6a" class="code"><code>MaxCacheFolderLengthWindows = 259 - &quot;/artifacts/&quot;.Length - ArtifactId.MaxLength;

ArtifactId.MaxLength= ArtifactName.MaxLength + 1 + ArtifactVersion.MaxLength

ArtifactName.MaxLength = 28
ArtifactVersion.MaxLength = VersionStringMaxLength + 1 + 64 + 7
VersionStringMaxLength = 40</code></pre><p id="35ee6b5d-a590-4a8b-955e-39fe36471141" class="">
</p></div></article></body></html>
